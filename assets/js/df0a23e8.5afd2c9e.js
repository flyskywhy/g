"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1818],{2092:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>x,frontMatter:()=>i,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u524d\u7aefCDN\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aefnodejs\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5","title":"\u524d\u7aefCDN\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aefnodejs\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5","description":"Li Zheng flyskywhy@gmail.com","source":"@site/../g/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u524d\u7aefCDN\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aefnodejs\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5.md","sourceDirName":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git","slug":"/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u524d\u7aefCDN\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aefnodejs\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u524d\u7aefCDN\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aefnodejs\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/../g/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u524d\u7aefCDN\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aefnodejs\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5236\u4f5cgit\u4e2d\u5fc3\u4ed3\u5e93\u7684\u65b9\u6cd5","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u5236\u4f5cgit\u4e2d\u5fc3\u4ed3\u5e93\u7684\u65b9\u6cd5"},"next":{"title":"\u5c06\u5df2\u6709\u7684Markdown\u6587\u6863Git\u4ed3\u5e93\u81ea\u52a8\u8f6c\u4e3a\u7f51\u9875\u5e76\u6258\u7ba1\u4e3a\u7f51\u7ad9","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/\u5c06\u5df2\u6709\u7684Markdown\u6587\u6863Git\u4ed3\u5e93\u81ea\u52a8\u8f6c\u4e3a\u7f51\u9875\u5e76\u6258\u7ba1\u4e3a\u7f51\u7ad9"}}');var s=c(4848),l=c(8453);const i={},t="\u524d\u7aef CDN \u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aef nodejs \u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5",r={},o=[{value:"\u8087\u56e0",id:"\u8087\u56e0",level:2},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5",level:2},{value:"\u540e\u7aef\u4ee3\u7801\u4fee\u6539",id:"\u540e\u7aef\u4ee3\u7801\u4fee\u6539",level:3},{value:"\u540e\u7aef\u57df\u540d\u89e3\u6790",id:"\u540e\u7aef\u57df\u540d\u89e3\u6790",level:3},{value:"\u524d\u7aef\u4ee3\u7801\u4fee\u6539",id:"\u524d\u7aef\u4ee3\u7801\u4fee\u6539",level:3},{value:"\u524d\u7aef\u4ee3\u7801\u90e8\u7f72\u5230 OSS",id:"\u524d\u7aef\u4ee3\u7801\u90e8\u7f72\u5230-oss",level:3},{value:"\u524d\u7aef\u4ee3\u7801 CDN \u52a0\u901f",id:"\u524d\u7aef\u4ee3\u7801-cdn-\u52a0\u901f",level:3},{value:"\u524d\u7aef\u57df\u540d\u89e3\u6790",id:"\u524d\u7aef\u57df\u540d\u89e3\u6790",level:3},{value:"\u7b80\u5316",id:"\u7b80\u5316",level:2},{value:"\u5220\u9664 <code>nginx.conf</code>",id:"\u5220\u9664-nginxconf",level:3},{value:"\u7b80\u5316 Dockerfile",id:"\u7b80\u5316-dockerfile",level:3},{value:"\u4fee\u6539 yaml",id:"\u4fee\u6539-yaml",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Li Zheng ",(0,s.jsx)(n.a,{href:"mailto:flyskywhy@gmail.com",children:"flyskywhy@gmail.com"})]}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u524d\u7aef-cdn-\u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aef-nodejs-\u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5",children:"\u524d\u7aef CDN \u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aef nodejs \u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5"})}),"\n",(0,s.jsx)(n.h2,{id:"\u8087\u56e0",children:"\u8087\u56e0"}),"\n",(0,s.jsxs)(n.p,{children:["\u672c\u6765\u5982\u679c\u80fd\u50cf ",(0,s.jsx)(n.a,{href:"/g/docs/i%E4%B8%BB%E8%A7%82%E7%9A%84%E4%BD%93%E9%AA%8C%E6%96%B9%E5%BC%8F/t%E5%BF%AB%E4%B9%90%E7%9A%84%E4%BD%93%E9%AA%8C/%E7%94%B5%E4%BF%A1/Tool/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/Git/GitLab%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2nodejs%E5%BA%94%E7%94%A8%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91Kubernetes%E9%9B%86%E7%BE%A4%E4%B8%AD",children:"gitlab \u81ea\u52a8\u90e8\u7f72 nodejs \u5e94\u7528\u5230\u963f\u91cc\u4e91 Kubernetes \u96c6\u7fa4\u4e2d"})," \u6240\u63cf\u8ff0\u7684\u524d\u540e\u7aef\u8bbf\u95ee\u540c\u4e00\u4e2a\u57df\u540d\u4ece\u800c\u4e0d\u5b58\u5728\u8de8\u57df\u95ee\u9898\uff0c\u90a3\u662f\u6700\u65b9\u4fbf\u7684\uff0c\u65e0\u5948\u5b9e\u9645\u6d4b\u8bd5\u53d1\u73b0\u901a\u8fc7 CDN \u6765\u8bbf\u95ee\u5176\u56de\u6e90\u7684\u8d1f\u8f7d\u5747\u8861\u63d0\u4f9b\u7684\u540e\u7aef API \u6027\u80fd\u76f8\u6bd4\u76f4\u63a5\u901a\u8fc7\u8d1f\u8f7d\u5747\u8861\u6765\u8bbf\u95ee\u4f1a\u5dee 6 \u500d\uff0c\u5373\u4f7f\u6539\u6210\u53f7\u79f0\u80fd\u591f\u63d0\u4f9b\u52a8\u6001\u52a0\u901f\u529f\u80fd\u7684 CDN \u7684\u5347\u7ea7\u4ea7\u54c1 DCDN ",(0,s.jsx)(n.a,{href:"https://dcdn.console.aliyun.com",children:"\u5168\u7ad9\u52a0\u901f"})," \u4e5f\u57fa\u672c\u6539\u5584\u4e0d\u5927\uff0c\u4e0b\u8868\u5c31\u662f\u963f\u91cc\u4e91 ",(0,s.jsx)(n.a,{href:"https://pts.aliyun.com/platinum",children:"\u6027\u80fd\u6d4b\u8bd5PTS"})," \u6240\u5f97\u7684\u9488\u5bf9 nodejs \u5e94\u7528\u7b80\u5355\u8fd4\u56de\u5185\u5b58\u4e2d\u6570\u636e\u7684 API \u7684\u538b\u529b\u6d4b\u8bd5\u7ed3\u679c\uff1a"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"\u573a\u666f"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"\u5e73\u5747TPS(\u6b21/\u79d2)"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"\u5e73\u5747RT(ms)"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"\u8d77\u6b62\u65f6\u95f4"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"www-get-cfg-dcdn"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"177.61"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"61.91"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u8d77\uff1a2018-09-28 09:44:53 \u6b62\uff1a2018-09-28 09:47:53"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"www-get-cfg-nocdn"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"899.66"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"11.02"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u8d77\uff1a2018-09-28 09:21:28 \u6b62\uff1a2018-09-28 09:24:28"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"www-get-cfg-cdn"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"149.25"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"68.68"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"\u8d77\uff1a2018-09-28 09:13:09 \u6b62\uff1a2018-09-28 09:16:09"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["\u53e6\u5916\uff0c\u5982\u679c nodejs \u5e94\u7528\u63d0\u4f9b\u4e86\u6587\u4ef6\u4e0b\u8f7d\u670d\u52a1\uff0c\u5219\u5f53\u6587\u4ef6\u8f83\u5927\u65f6\uff0c\u5728\u4f7f\u7528\u963f\u91cc\u4e91 ",(0,s.jsx)(n.a,{href:"https://cdn.console.aliyun.com",children:"CDN"})," \u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u6709\u975e\u5e38\u5927\u7684\u6982\u7387\u4e0b\u8f7d\u5931\u8d25\uff0c\u6b64\u79cd\u5e94\u7528\u5219\u53ea\u80fd\u8ba9\u524d\u540e\u7aef\u4f7f\u7528\u4e0d\u7528\u57df\u540d\u4f7f\u5f97\u540e\u7aef\u4e0d\u4f7f\u7528 CDN \u3002\u800c\u4e3a\u4e86\u4e0d\u5728\u8de8\u57df\u65f6\u51fa\u73b0\u6bd4\u5982 ",(0,s.jsx)(n.a,{href:"https://segmentfault.com/a/1190000015597029",children:"\u4e0d\u8981\u518d\u95ee\u6211\u8de8\u57df\u7684\u95ee\u9898\u4e86"})," \u63d0\u5230\u7684\u5b89\u5168\u95ee\u9898\uff0c\u524d\u540e\u7aef\u4ee3\u7801\u9700\u8981\u914d\u5408\u5904\u7406\u5b8c\u5584\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u65b9\u6cd5",children:"\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.p,{children:"\u540e\u7aef\u8de8\u57df\u8bbe\u7f6e\u53ef\u4ee5\u5728\u540e\u7aef\u7684 nginx.conf \u6216 nodejs \u5e94\u7528\u4ee3\u7801\u4e2d\u8bbe\u7f6e\uff0c\u5b9e\u9645\u8bd5\u9a8c\u53d1\u73b0\uff0c nginx.conf \u7684\u8de8\u57df\u65b9\u6cd5\u7ecf\u5e38\u51fa\u73b0\u6709\u4e00\u4e9b API \u8bf7\u6c42\u6ca1\u6709\u8de8\u57df\u6210\u529f\u7684\u95ee\u9898\uff0c\u800c nodejs \u5e94\u7528\u4ee3\u7801\u7684\u8de8\u57df\u65b9\u6cd5\u5219\u5168\u90e8\u8de8\u57df\u6210\u529f\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u540e\u7aef\u4ee3\u7801\u4fee\u6539",children:"\u540e\u7aef\u4ee3\u7801\u4fee\u6539"}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd9\u91cc\u4ee5 nodejs \u7684 koa \u6846\u67b6\u6240\u7528\u7684 ",(0,s.jsx)(n.a,{href:"https://github.com/koajs/cors",children:"kcors"})," \u7ec4\u4ef6\u4e3a\u4f8b\uff0c\u540e\u7aef\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"var cors = require('kcors');\n\n...\n\napp.use(cors({\n    credentials: true,\n    origin: ctx => {\n        // \u5e26\u6709 www. \u524d\u7f00\u7684\u662f\u53ef\u80fd\u88ab CDN \u52a0\u901f\u7684\u524d\u7aef\u9759\u6001\u7f51\u9875\u7684\u6258\u7ba1\u670d\u52a1\u5668\u5730\u5740\uff0c\n        // \u6ca1\u6709 www. \u524d\u7f00\u7684\u662f\u4e0d\u5728 CDN \u540e\u9762\u56e0\u800c\u4e0d\u4f1a\u88ab CDN \u5ef6\u65f6 6 \u500d\u5de6\u53f3\u7684\u540e\u7aef\u670d\u52a1\u5668\u5730\u5740\n\n        // \u5982\u679c\u524d\u7aef\u7f51\u5740\u672c\u8eab\u5c31\u4e0d\u5e26\u6709 www. \u524d\u7f00\u6765\u8bbf\u95ee\uff0c\u8fd9\u91cc\u4e5f\u662f\u517c\u5bb9\u6027\u7684\n        // \u517c\u5bb9\u524d\u540e\u7aef\u7f51\u5740\u76f8\u540c\u6bd4\u5982\u90fd\u5e26\u6709 www. \u524d\u7f00\u7684\u60c5\u51b5\n        if (ctx.header.origin.replace(/^https?:\\/\\//, '').replace(/^www\\./, '').replace(/:[0-9]+$/, '') === ctx.header.host.replace(/^www\\./, '').replace(/:[0-9]+$/, '')) {\n            return ctx.header.origin;\n        }\n    },\n}));\n\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u540e\u7aef\u57df\u540d\u89e3\u6790",children:"\u540e\u7aef\u57df\u540d\u89e3\u6790"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.a,{href:"https://dns.console.aliyun.com",children:"\u4e91\u89e3\u6790DNS"})," \u4e2d\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"yourcompany.com"})," \u7684 ",(0,s.jsx)(n.code,{children:"\u89e3\u6790\u8bbe\u7f6e"})," \uff0c\u5728 ",(0,s.jsx)(n.code,{children:"\u6dfb\u52a0\u8bb0\u5f55"})," \u7684\u5bf9\u8bdd\u6846\u4e2d\uff0c ",(0,s.jsx)(n.code,{children:"\u8bb0\u5f55\u7c7b\u578b"})," \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"A"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u4e3b\u673a\u8bb0\u5f55"})," \u4e3a ",(0,s.jsx)(n.code,{children:"@"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u8bb0\u5f55\u503c"})," \u4e3a",(0,s.jsx)(n.a,{href:"https://slb.console.aliyun.com",children:"\u8d1f\u8f7d\u5747\u8861"})," \u5b9e\u4f8b\u7684 IP \u5730\u5740\uff0c\u5982\u6b64\u5c31\u5c06\u6ca1\u6709 ",(0,s.jsx)(n.code,{children:"www."})," \u524d\u7f00\u7684\u540e\u7aef\u670d\u52a1\u5668\u5730\u5740 ",(0,s.jsx)(n.code,{children:"yourcompany.com"})," \u89e3\u6790\u5230\u76f4\u63a5\u8d1f\u8f7d\u5747\u8861\u7684 IP \u5730\u5740\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u524d\u7aef\u4ee3\u7801\u4fee\u6539",children:"\u524d\u7aef\u4ee3\u7801\u4fee\u6539"}),"\n",(0,s.jsxs)(n.p,{children:["\u5c06\u524d\u7aef\u4ee3\u7801\u4e2d\u539f\u6709\u7684 ",(0,s.jsx)(n.code,{children:"www.yourcompany.com"})," \u8bed\u53e5\u4fee\u6539\u4e3a ",(0,s.jsx)(n.code,{children:"yourcompany.com"})," \uff0c\u6216\u8005\u662f\u5c06\u539f\u6765\u7684"]}),"\n",(0,s.jsx)(n.p,{children:"apiAddress = '';"}),"\n",(0,s.jsx)(n.p,{children:"\u4fee\u6539\u4e3a"}),"\n",(0,s.jsxs)(n.p,{children:["apiAddress = location.origin.replace(/://",(0,s.jsx)(n.a,{href:"http://www./",children:"www./"}),","," '://');"]}),"\n",(0,s.jsx)(n.h3,{id:"\u524d\u7aef\u4ee3\u7801\u90e8\u7f72\u5230-oss",children:"\u524d\u7aef\u4ee3\u7801\u90e8\u7f72\u5230 OSS"}),"\n",(0,s.jsxs)(n.p,{children:["\u5c06\u524d\u7aef\u4ee3\u7801\u90e8\u7f72\u5230 OSS \u5730\u5740\u800c\u975e\u539f\u5148\u540e\u7aef ECS \u4e2d\u7684\u67d0\u4e2a\u76ee\u5f55\uff0c\u5e76\u5728 ",(0,s.jsx)(n.a,{href:"https://oss.console.aliyun.com",children:"\u5bf9\u8c61\u5b58\u50a8 OSS"})," \u7684 ",(0,s.jsx)(n.code,{children:"\u57fa\u7840\u8bbe\u7f6e | \u9759\u6001\u9875\u9762"})," \u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"\u9ed8\u8ba4\u9996\u9875"})," \u4e3a ",(0,s.jsx)(n.code,{children:"index.html"}),"\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u524d\u7aef\u4ee3\u7801-cdn-\u52a0\u901f",children:"\u524d\u7aef\u4ee3\u7801 CDN \u52a0\u901f"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.a,{href:"https://cdn.console.aliyun.com",children:"CDN"})," \u7684 ",(0,s.jsx)(n.code,{children:"\u57df\u540d\u7ba1\u7406"})," \u4e2d ",(0,s.jsx)(n.code,{children:"\u6dfb\u52a0\u57df\u540d"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u52a0\u901f\u57df\u540d"})," \u8bbe\u4e3a ",(0,s.jsx)(n.code,{children:"www.yourcompany.com"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u4e1a\u52a1\u7c7b\u578b"})," \u8bbe\u4e3a ",(0,s.jsx)(n.code,{children:"\u56fe\u7247\u5c0f\u6587\u4ef6"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u6e90\u7ad9\u4fe1\u606f"})," \u8bbe\u4e3a\u90e8\u7f72\u7740\u524d\u7aef\u4ee3\u7801\u7684 OSS \u5730\u5740\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u524d\u7aef\u57df\u540d\u89e3\u6790",children:"\u524d\u7aef\u57df\u540d\u89e3\u6790"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.a,{href:"https://dns.console.aliyun.com",children:"\u4e91\u89e3\u6790DNS"})," \u4e2d\u70b9\u51fb ",(0,s.jsx)(n.code,{children:"yourcompany.com"})," \u7684 ",(0,s.jsx)(n.code,{children:"\u89e3\u6790\u8bbe\u7f6e"})," \uff0c\u5728 ",(0,s.jsx)(n.code,{children:"\u6dfb\u52a0\u8bb0\u5f55"})," \u7684\u5bf9\u8bdd\u6846\u4e2d\uff0c ",(0,s.jsx)(n.code,{children:"\u8bb0\u5f55\u7c7b\u578b"})," \u9009\u62e9 ",(0,s.jsx)(n.code,{children:"CNAME"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u4e3b\u673a\u8bb0\u5f55"})," \u4e3a ",(0,s.jsx)(n.code,{children:"www"})," \uff0c ",(0,s.jsx)(n.code,{children:"\u8bb0\u5f55\u503c"})," \u4e3a CDN ",(0,s.jsx)(n.code,{children:"\u57df\u540d\u7ba1\u7406"})," \u4e2d ",(0,s.jsx)(n.code,{children:"www.yourcompany.com"})," \u7684 CNAME \uff0c\u5982\u6b64\u5c31\u5c06\u5e26\u6709 ",(0,s.jsx)(n.code,{children:"www."})," \u524d\u7f00\u7684\u524d\u7aef\u9759\u6001\u7f51\u9875\u7684\u6258\u7ba1\u670d\u52a1\u5668\u5730\u5740 ",(0,s.jsx)(n.code,{children:"www.yourcompany.com"})," \u89e3\u6790\u5230 CDN \u5730\u5740\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"\u7b80\u5316",children:"\u7b80\u5316"}),"\n",(0,s.jsxs)(n.p,{children:["\u7531\u4e8e\u4e0d\u518d\u9700\u8981 nginx \uff0c",(0,s.jsx)(n.a,{href:"/g/docs/i%E4%B8%BB%E8%A7%82%E7%9A%84%E4%BD%93%E9%AA%8C%E6%96%B9%E5%BC%8F/t%E5%BF%AB%E4%B9%90%E7%9A%84%E4%BD%93%E9%AA%8C/%E7%94%B5%E4%BF%A1/Tool/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/Git/GitLab%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2nodejs%E5%BA%94%E7%94%A8%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91Kubernetes%E9%9B%86%E7%BE%A4%E4%B8%AD",children:"gitlab \u81ea\u52a8\u90e8\u7f72 nodejs \u5e94\u7528\u5230\u963f\u91cc\u4e91 Kubernetes \u96c6\u7fa4\u4e2d"})," \u6587\u4e2d\u7684\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u88ab\u7b80\u5316\u3002"]}),"\n",(0,s.jsxs)(n.h3,{id:"\u5220\u9664-nginxconf",children:["\u5220\u9664 ",(0,s.jsx)(n.code,{children:"nginx.conf"})]}),"\n",(0,s.jsx)(n.h3,{id:"\u7b80\u5316-dockerfile",children:"\u7b80\u5316 Dockerfile"}),"\n",(0,s.jsx)(n.p,{children:"Dockerfile \u4e2d\u7684 nginx \u76f8\u5173\u5185\u5bb9\u4e5f\u4e0d\u518d\u9700\u8981\u4e86\uff0c\u53ef\u7b80\u5316\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"FROM debian:stretch-slim\n\nCOPY nodeapp ./\nCMD ./nodeapp\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6ce8\uff0c\u53d1\u73b0\u4e0d\u9700\u8981\u663e\u793a ",(0,s.jsx)(n.code,{children:"EXPOSE 1234"})," \u4e5f\u80fd\u8ba9 docker \u5bb9\u5668\u5f00\u653e\u540e\u7aef\u670d\u52a1 nodeapp \u5f00\u542f\u7684 1234 \u7aef\u53e3\uff0c\u8fd9\u6837\u53c8\u53ef\u4ee5\u8ba9 docker \u955c\u50cf\u5c11\u7f16\u8bd1\u4e00\u4e2a\u5c42\u4e86\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u4fee\u6539-yaml",children:"\u4fee\u6539 yaml"}),"\n",(0,s.jsxs)(n.p,{children:["\u5c06 ",(0,s.jsx)(n.code,{children:"deploy.yaml"})," \u548c ",(0,s.jsx)(n.code,{children:"svc.yaml"})," \u4e2d\u7684 8010 \u7aef\u53e3\u4fee\u6539\u4e3a\u540e\u7aef\u670d\u52a1 nodeapp \u5f00\u542f\u7684 1234 \u7aef\u53e3\u3002"]})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,c)=>{c.d(n,{R:()=>i,x:()=>t});var d=c(6540);const s={},l=d.createContext(s);function i(e){const n=d.useContext(l);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),d.createElement(l.Provider,{value:n},e.children)}}}]);