"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5663],{2839:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/GitLab\u81ea\u52a8\u90e8\u7f72nodejs\u5e94\u7528\u5230\u963f\u91cc\u4e91Kubernetes\u96c6\u7fa4\u4e2d","title":"GitLab\u81ea\u52a8\u90e8\u7f72nodejs\u5e94\u7528\u5230\u963f\u91cc\u4e91Kubernetes\u96c6\u7fa4\u4e2d","description":"Li Zheng flyskywhy@gmail.com","source":"@site/../g/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/GitLab\u81ea\u52a8\u90e8\u7f72nodejs\u5e94\u7528\u5230\u963f\u91cc\u4e91Kubernetes\u96c6\u7fa4\u4e2d.md","sourceDirName":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git","slug":"/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/GitLab\u81ea\u52a8\u90e8\u7f72nodejs\u5e94\u7528\u5230\u963f\u91cc\u4e91Kubernetes\u96c6\u7fa4\u4e2d","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/GitLab\u81ea\u52a8\u90e8\u7f72nodejs\u5e94\u7528\u5230\u963f\u91cc\u4e91Kubernetes\u96c6\u7fa4\u4e2d","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"GitLab\u4f7f\u7528\u8be6\u89e3","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/GitLab\u4f7f\u7528\u8be6\u89e3"},"next":{"title":"Git\u6700\u7b80\u57f9\u8bad","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u914d\u7f6e\u7ba1\u7406/Git/Git\u6700\u7b80\u57f9\u8bad"}}');var c=s(4848),t=s(8453);const o={},l="gitlab \u81ea\u52a8\u90e8\u7f72 nodejs \u5e94\u7528\u5230\u963f\u91cc\u4e91 Kubernetes \u96c6\u7fa4\u4e2d",i={},d=[{value:"\u5728\u963f\u91cc\u4e91\u4e2d\u5f00\u542f\u5bb9\u5668\u4ed3\u5e93",id:"\u5728\u963f\u91cc\u4e91\u4e2d\u5f00\u542f\u5bb9\u5668\u4ed3\u5e93",level:2},{value:"\u7528 docker \u751f\u6210\u540e\u7aef\u955c\u50cf",id:"\u7528-docker-\u751f\u6210\u540e\u7aef\u955c\u50cf",level:2},{value:"\u90e8\u7f72\u524d\u7aef\u9759\u6001\u6587\u4ef6\u5230 OSS \u4e2d",id:"\u90e8\u7f72\u524d\u7aef\u9759\u6001\u6587\u4ef6\u5230-oss-\u4e2d",level:2},{value:"\u90e8\u7f72\u540e\u7aef\u955c\u50cf\u5230 Kubernetes \u4e2d",id:"\u90e8\u7f72\u540e\u7aef\u955c\u50cf\u5230-kubernetes-\u4e2d",level:2},{value:"\u963f\u91cc\u4e91 Kubernetes",id:"\u963f\u91cc\u4e91-kubernetes",level:3},{value:"\u963f\u91cc\u4e91 Serverless Kubernetes",id:"\u963f\u91cc\u4e91-serverless-kubernetes",level:3},{value:"\u8ba9\u5176\u4ed6\u963f\u91cc\u4e91\u4ea7\u54c1\u80fd\u591f\u8bbf\u95ee Kubernetes pod",id:"\u8ba9\u5176\u4ed6\u963f\u91cc\u4e91\u4ea7\u54c1\u80fd\u591f\u8bbf\u95ee-kubernetes-pod",level:2},{value:"\u8ba9 Kubernetes pod \u80fd\u591f\u8bbf\u95ee\u5916\u7f51",id:"\u8ba9-kubernetes-pod-\u80fd\u591f\u8bbf\u95ee\u5916\u7f51",level:2},{value:"log",id:"log",level:2},{value:"\u963f\u91cc\u4e91 Kubernetes \u7684 log",id:"\u963f\u91cc\u4e91-kubernetes-\u7684-log",level:3},{value:"\u963f\u91cc\u4e91 Serverless Kubernetes \u7684 log",id:"\u963f\u91cc\u4e91-serverless-kubernetes-\u7684-log",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:["Li Zheng ",(0,c.jsx)(n.a,{href:"mailto:flyskywhy@gmail.com",children:"flyskywhy@gmail.com"})]}),"\n",(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"gitlab-\u81ea\u52a8\u90e8\u7f72-nodejs-\u5e94\u7528\u5230\u963f\u91cc\u4e91-kubernetes-\u96c6\u7fa4\u4e2d",children:"gitlab \u81ea\u52a8\u90e8\u7f72 nodejs \u5e94\u7528\u5230\u963f\u91cc\u4e91 Kubernetes \u96c6\u7fa4\u4e2d"})}),"\n",(0,c.jsx)(n.p,{children:"\u4f7f\u7528 ECS \u90e8\u7f72\u7684\u57fa\u672c\u6b65\u9aa4\uff1a\u5c06\u7a0b\u5e8f\u590d\u5236\u5230 ECS \u67d0\u4e2a\u76ee\u5f55\u4e2d\u7136\u540e\u53d1\u547d\u4ee4\u7ed9 ECS \u542f\u52a8\u7a0b\u5e8f\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u4f7f\u7528 K8S \u90e8\u7f72\u7684\u57fa\u672c\u6b65\u9aa4\uff1a\u5c06\u7a0b\u5e8f\u5236\u4f5c\u4e3a docker \u955c\u50cf\u5e76\u590d\u5236\u5230\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u4e2d\u7136\u540e\u53d1\u547d\u4ee4\u7ed9\u963f\u91cc\u4e91 Kubernetes \u53bb\u53d6\u955c\u50cf\u5e76\u8fd0\u884c\u3002"}),"\n",(0,c.jsx)(n.p,{children:"\u8003\u8651\u5230 gitlab \u514d\u8d39\u7248 DevOps \u81ea\u52a8\u90e8\u7f72\u6a21\u5757\u6700\u8fd1\u65b0\u589e\u7684 Kubernetes \u529f\u80fd\u53ea\u652f\u6301\u4e00\u4e2a Kubernetes \u96c6\u7fa4\uff0c\u800c\u4efb\u4f55\u7248\u672c\u7684 gitlab \u4e2d\u5bf9 Kubernetes \u7684\u4e00\u4e9b\u989d\u5916\u652f\u6301\u5982 Kubernetes \u5e94\u7528\u5e02\u573a\u7b49\u529f\u80fd\uff0c\u4e0e\u5546\u4e1a\u6536\u8d39\u7684\u963f\u91cc\u4e91 Kubernetes \u4ea7\u54c1\u4e2d\u7684\u529f\u80fd\u91cd\u590d\uff0c\u6240\u4ee5\u629b\u5f00 gitlab \u81ea\u5e26\u7684 Kubernetes \u529f\u80fd\uff0c\u76f4\u63a5\u4f7f\u7528 kubectrl \u547d\u4ee4\u884c\u5de5\u5177\u6765\u8fde\u63a5 gitlab \u81ea\u52a8\u90e8\u7f72\u811a\u672c\u548c\u963f\u91cc\u4e91 Kubernetes \u4ea7\u54c1\u7684\u65b9\u6cd5\u6700\u4e3a\u4f4e\u8026\u5408\u3001\u4f4e\u8d39\u7528\uff0c\u8fd9\u91cc\u4f4e\u8026\u5408\u7684\u610f\u601d\u662f\u5728\u4fdd\u8bc1 CI/CD \u57fa\u672c\u6d41\u7a0b\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u968f\u65f6\u5207\u6362\u5176\u4e2d\u7684 ECS \u6216 K8S \u90e8\u7f72\uff0c\u53c2\u89c1\u4e0b\u56fe\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"                                                  \u8d1f\u8f7d\u5747\u8861\u5230 ECS \u6216 docker \u4e2d\u7684\n\u6d4f\u89c8\u5668 <======> \u963f\u91cc\u4e91 CDN \u5224\u65ad\u662f\u5426\u8bbf\u95ee\u9759\u6001\u6587\u4ef6 <===n===> nginx \u5224\u65ad\u662f\u5426\u8bbf\u95ee\u9759\u6001\u6587\u4ef6 <===n===> ECS \u6216 docker \u4e2d\u7684\u540e\u7aef\u8fdb\u7a0b\n   ^                       |                             ^            ^                          ^\n   |                      y|                             |           y|                          |\n   |                       \u2304                             |            \u2304                          |\n   =======y======= CDN \u662f\u5426\u5df2\u6709\u7f13\u5b58 <===n===================     \u963f\u91cc\u4e91 OSS \u4e2d\u7684\u524d\u7aef\u6587\u4ef6 <=== \u8fd0\u884c gitlab \u81ea\u52a8\u90e8\u7f72\u811a\u672c\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\u5bf9\u4e8e\u9759\u6001\u6587\u4ef6\u7684\u5224\u65ad\uff0c\u963f\u91cc\u4e91 CDN \u548c nginx \u662f\u6709\u91cd\u590d\u64cd\u4f5c\u7684\uff0c\u540e\u6587\u4f1a\u63d0\u5230\u4f7f\u7528\u8de8\u57df\u8bbf\u95ee\u6765\u4f18\u5316\u7684\u65b9\u6cd5\u3002"}),"\n",(0,c.jsx)(n.h2,{id:"\u5728\u963f\u91cc\u4e91\u4e2d\u5f00\u542f\u5bb9\u5668\u4ed3\u5e93",children:"\u5728\u963f\u91cc\u4e91\u4e2d\u5f00\u542f\u5bb9\u5668\u4ed3\u5e93"}),"\n",(0,c.jsxs)(n.p,{children:["\u5982\u679c\u662f\u7528\u963f\u91cc\u4e91\u5b50\u8d26\u53f7\u6765\u64cd\u4f5c\u5bb9\u5668\u4ed3\u5e93\u7684\uff0c\u9700\u8981\u6dfb\u52a0 ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/67992.html",children:"\u4ed3\u5e93\u8bbf\u95ee\u63a7\u5236"})," \u4e2d\u63cf\u8ff0\u7684\u6743\u9650\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u7528\u963f\u91cc\u4e91\u4e3b\u8d26\u53f7\u6216\u5b50\u8d26\u53f7\u8fdb\u5165\u963f\u91cc\u4e91 ",(0,c.jsx)(n.a,{href:"https://cr.console.aliyun.com/",children:"\u5bb9\u5668\u955c\u50cf\u670d\u52a1"})," \u7684\u955c\u50cf\u5217\u8868\u9875\u9762\uff0c\u70b9\u51fb\u201c\u4fee\u6539Registry\u767b\u5f55\u5bc6\u7801\u201d\u6309\u94ae\uff0c\u4ee5\u521b\u5efa\u4eca\u540e\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"docker login"})," \u547d\u4ee4\u65f6\u7684\u5bc6\u7801\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u8fdb\u5165\u963f\u91cc\u4e91 ",(0,c.jsx)(n.a,{href:"https://cr.console.aliyun.com/",children:"\u5bb9\u5668\u955c\u50cf\u670d\u52a1"})," \u7684\u547d\u540d\u7a7a\u95f4\u7ba1\u7406\u9875\u9762\uff0c\u70b9\u51fb\u201c\u521b\u5efa\u547d\u540d\u7a7a\u95f4\u201d\u6309\u94ae\uff0c\u7528\u516c\u53f8\u540d\u6216\u4eba\u540d\u4f5c\u4e3a\u547d\u540d\u7a7a\u95f4\uff0c\u4ee5\u4fbf\u4eca\u540e\u5728\u6bd4\u5982\u963f\u91cc\u4e91\u5bb9\u5668 registry \u7684\u516c\u7f51\u5730\u5740 ",(0,c.jsx)(n.code,{children:"registry.cn-hangzhou.aliyuncs.com/\u4f60\u7684\u547d\u540d\u7a7a\u95f4/\u4f60\u7684\u5bb9\u5668\u540d\u79f0"})," \u4e2d\u4e0e\u5176\u4ed6\u4eba\u7684\u5bb9\u5668\u52a0\u4ee5\u533a\u5206\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6309 ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/60743.html",children:"\u955c\u50cf\u57fa\u672c\u64cd\u4f5c"})," \u4e2d\u7684\u63cf\u8ff0 ",(0,c.jsx)(n.code,{children:"docker login"})," \u540e\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb docker \u5176\u5b83\u64cd\u4f5c\u4e86\uff0c\u8be6\u89c1\u4e0b\u6587\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u7528-docker-\u751f\u6210\u540e\u7aef\u955c\u50cf",children:"\u7528 docker \u751f\u6210\u540e\u7aef\u955c\u50cf"}),"\n",(0,c.jsxs)(n.p,{children:["\u57fa\u672c\u601d\u8def\u662f\u5728\u81ea\u52a8\u90e8\u7f72\u811a\u672c\u4e2d\u751f\u6210\u955c\u50cf\uff0c\u56e0\u4e3a\u81ea\u52a8\u90e8\u7f72\u811a\u672c\u4e00\u822c\u5728\u5bb9\u5668\u4e2d\u6267\u884c\uff0c\u4e3a\u4e86\u5728 docker \u5bb9\u5668\u4e2d\u751f\u6210 docker \u955c\u50cf\uff0c\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/",children:"Using Docker-in-Docker for your CI or testing environment? Think twice."})," \uff0c\u4fee\u6539 ",(0,c.jsx)(n.code,{children:"/etc/gitlab-runner/config.toml"})," \u6587\u4ef6\u5185\u5bb9\uff1a"]}),"\n",(0,c.jsxs)(n.p,{children:['volumes = ["/srv/cache:/cache',":rw",'"\uff0c "/var/run/docker.sock:/var/run/docker.sock"]']}),"\n",(0,c.jsxs)(n.p,{children:['\u8fd9\u91cc "/srv/cache:/cache',":rw",'" \u610f\u4e49\u8be6\u89c1 ',(0,c.jsx)(n.a,{href:"/g/docs/i%E4%B8%BB%E8%A7%82%E7%9A%84%E4%BD%93%E9%AA%8C%E6%96%B9%E5%BC%8F/t%E5%BF%AB%E4%B9%90%E7%9A%84%E4%BD%93%E9%AA%8C/%E7%94%B5%E4%BF%A1/Tool/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/Git/GitLab%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3",children:"GitLab\u4f7f\u7528\u8be6\u89e3"}),' \uff0c "/var/run/docker.sock:/var/run/docker.sock" \u610f\u4e49\u5728\u4e8e\u8ba9 docker container \u5185\u8fd0\u884c\u7684 docker-cli \u547d\u4ee4\u80fd\u591f\u4f7f\u7528 container \u5916\u7684\u4e3b\u673a\u7684 docker \u73af\u5883\u3002']}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 gitlab \u81ea\u52a8\u90e8\u7f72\u811a\u672c ",(0,c.jsx)(n.code,{children:".gitlab-ci.yml"})," \u6587\u4ef6\u4e2d\u7f16\u5199\u5982\u4e0b\u5185\u5bb9\uff08\u5176\u4e2d\u4e3a\u4e86\u52a0\u5feb\u90e8\u7f72\u901f\u5ea6\u548c\u52a0\u5bc6 JS \u6e90\u4ee3\u7801\uff0c\u4f7f\u7528\u4e86 ",(0,c.jsx)(n.a,{href:"https://github.com/pmq20/node-packer",children:"nodec"})," \u6765\u5c06 ",(0,c.jsx)(n.code,{children:"index.js"})," ",(0,c.jsx)(n.code,{children:"node_modules/"})," \u7b49\u7b49\u7f16\u8bd1\u4e3a\u5355\u72ec\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u53c2\u89c1 ",(0,c.jsx)(n.a,{href:"/g/docs/i%E4%B8%BB%E8%A7%82%E7%9A%84%E4%BD%93%E9%AA%8C%E6%96%B9%E5%BC%8F/t%E5%BF%AB%E4%B9%90%E7%9A%84%E4%BD%93%E9%AA%8C/%E7%94%B5%E4%BF%A1/Tool/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/nodec%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3",children:"nodec \u4f7f\u7528\u8be6\u89e3"}),"\uff09\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'image: flyskywhy/java-nodejs:v8.3.0\n\ndeploy-k8s-backend:\n  stage: deploy\n  cache:\n    key: backend\n    paths:\n      - node_modules/\n  tags:\n    - docker # \u4e0b\u9762\u7684 nodec \u9700\u8981 10GB \u5de6\u53f3\u7684\u5185\u5b58\u548c 10GB \u5de6\u53f3\u7684\u4ea4\u6362\u7a7a\u95f4\uff0c\u6240\u4ee5\u8fd9\u91cc\u4f7f\u7528\u4e86\u5728\u8db3\u591f\u5185\u5b58\u548c\u4ea4\u6362\u7a7a\u95f4\u7684\u7535\u8111\u4e0a\u7684 tags \u53eb\u505a docker \u7684\u4e00\u4e2a Gitlab Runner \u6765\u8fd0\u884c\u6b64\u81ea\u52a8\u90e8\u7f72\u811a\u672c\n  before_script:\n    - export NPM_CONFIG_CACHE=/cache/npm\n    - rm -fr __tests__ android app index.android.js index.ios.js index.web.js ios # \u5220\u9664\u540e\u7aef\u8fd0\u884c\u65f6\u4e0d\u9700\u8981\u7684\u6587\u4ef6\uff0c\u4ee5\u51cf\u5c0f nodec \u6700\u7ec8\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5927\u5c0f\n    - sed -i -e \'/    "react/d\' -e \'/    "redux/d\' -e \'/    "rmc-/d\' package.json # \u53bb\u9664\u524d\u7aef\u4f9d\u8d56\uff0c\u4ee5\u52a0\u5feb npm update \u901f\u5ea6\n    - sed -i -e "s/^{.*/{\\"gitSha\\":\\"`git rev-parse --short HEAD`\\",/" package.json # \u5982\u679c nodejs \u5e94\u7528\u4e2d\u60f3\u8981 git \u54c8\u5e0c\u503c\u7684\u8bdd\u53ef\u4ee5\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a nodec \u6700\u7ec8\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5185\u90e8\u662f\u4e0d\u5305\u542b .git/ \u7684\n    - npm update --production\n    - npm run postinstall\n  script:\n    - /cache/opt/nodec -o nodeapp --skip-npm-install index.js 1>/dev/null 2>&1 # \u5c06\u6240\u6709\u9879\u76ee\u4ee3\u7801\u7f16\u8bd1\u4e3a\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\n    - /cache/opt/docker-cli login -u $ALIYUN_USER -p $ALIYUN_DOCKER_PWD registry.cn-shanghai.aliyuncs.com # \u8fd9\u91cc\u7684 docker-cli \u7f16\u8bd1\u81ea https://github.com/docker/cli\n    - export DOCKER_IMAGE_NAME=registry.cn-shanghai.aliyuncs.com/\u4f60\u7684\u547d\u540d\u7a7a\u95f4/\u4f60\u7684\u5bb9\u5668\u540d\u79f0\n    - /cache/opt/docker-cli rmi $DOCKER_IMAGE_NAME --force\n    - /cache/opt/docker-cli build -t $DOCKER_IMAGE_NAME .\n    - /cache/opt/docker-cli push $DOCKER_IMAGE_NAME:latest\n  only:\n    - k8s-backend\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u5176\u4e2d ",(0,c.jsx)(n.code,{children:"docker-cli push"})," \u8981\u6ce8\u610f\u7684\u662f\uff0c\u4ece ECS \u63a8\u9001\u955c\u50cf\u65f6\uff08\u6bd4\u5982\u4f60\u7684 Gitlab Runner \u8fd0\u884c\u5728\u963f\u91cc\u4e91 ECS \u4e2d\uff09\uff0c\u53ef\u4ee5\u9009\u62e9\u8d70\u5185\u7f51\uff0c\u901f\u5ea6\u5c06\u5927\u5927\u63d0\u5347\uff0c\u5e76\u4e14\u5c06\u4e0d\u4f1a\u635f\u8017\u60a8\u7684\u516c\u7f51\u6d41\u91cf\u3002"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u5982\u679c\u60a8\u7533\u8bf7\u7684\u673a\u5668\u662f\u5728\u7ecf\u5178\u7f51\u7edc\uff0c\u8bf7\u4f7f\u7528 registry-internal.cn-shanghai.aliyuncs.com \u4f5c\u4e3aregistry\u7684\u57df\u540d\u767b\u5f55, \u5e76\u4f5c\u4e3a\u955c\u50cf\u540d\u7a7a\u95f4\u524d\u7f00"}),"\n",(0,c.jsx)(n.li,{children:"\u5982\u679c\u60a8\u7533\u8bf7\u7684\u673a\u5668\u662f\u5728vpc\u7f51\u7edc\u7684\uff0c\u8bf7\u4f7f\u7528 registry-vpc.cn-shanghai.aliyuncs.com \u4f5c\u4e3aregistry\u7684\u57df\u540d\u767b\u5f55, \u5e76\u4f5c\u4e3a\u955c\u50cf\u540d\u7a7a\u95f4\u524d\u7f00"}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["\u5176\u4e2d ",(0,c.jsx)(n.code,{children:"docker-cli build"})," \u6240\u9ed8\u8ba4\u8c03\u7528\u7684\u9879\u76ee\u6839\u76ee\u5f55\u4e2d\u7684 Dockerfile \u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"FROM nginx:1.14 # \u56e0\u4e3a 19MB \u7684nginx:1.14-alpine \u65e0\u6cd5\u8fd0\u884c\u9700\u8981\u6807\u51c6 glibc \u7684 node \u7a0b\u5e8f\uff0c\u6240\u4ee5\u9000\u800c\u6c42\u5176\u6b21\u9009\u62e9\u4e86\u57fa\u4e8e\u4e5f\u7b97\u6bd4\u8f83\u7626\u5c0f\u7684 debian:stretch-slim \u5236\u4f5c\u7684 109MB \u7684 nginx:1.14\n\nMAINTAINER Li Zheng <flyskywhy@gmail.com>\n\nCOPY nodeapp ./ # \u8fd9\u91cc\u662f\u628a\u524d\u9762\u7528 nodec \u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u590d\u5236\u5230\u955c\u50cf\u4e2d\nCOPY scripts/nginx.conf /etc/nginx/conf.d/default.conf\n\nEXPOSE 8010 # \u8be5\u503c\u4e0e nginx.conf \u4e2d\u7684 listen \u5bf9\u5e94\nCMD nginx && ./nodeapp # nginx \u88ab\u8fd0\u884c\u540e\u4f1a\u81ea\u52a8\u53d8\u6210\u5b88\u62a4\u8fdb\u7a0b\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u800c\u57fa\u4e8e\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u7a0b\u5e8f\u5728\u524d\u53f0\u8fd0\u884c\u5426\u5219\u4f1a\u81ea\u52a8\u5173\u95ed docker \u5bb9\u5668\u7684\u6982\u5ff5\uff0c\u8fd9\u91cc\u91c7\u7528\u4e86\u5728\u524d\u53f0\u8fd0\u884c\u6211\u4eec\u7684 `node index.js` \u5e94\u7528\u6216\u662f\u88ab nodec \u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u65b9\u6cd5\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u5176\u4e2d ",(0,c.jsx)(n.code,{children:"nginx.conf"})," \u7684\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"upstream be_upstream {\n    server 127.0.0.1:1234 weight=7;\n    keepalive 64;\n}\n\nserver {\n    listen 8010;\n\n    #server_name www.YourProject.com # \u8fd9\u4e00\u884c\u662f\u4e0d\u9700\u8981\u7684\uff0c\u56e0\u4e3a\u5bb9\u5668\u91cc\u663e\u7136\u6700\u597d\u53ea\u8fd0\u884c\u4e00\u9879\u670d\u52a1\uff0c\u6240\u4ee5\u6ca1\u5fc5\u8981\u53ea\u76d1\u542c\uff08\u4e0a\u9762\u7684 listen \uff09\u4e00\u4e2a\u7aef\u53e3\u6bd4\u5982 80 \u7136\u540e\u901a\u8fc7\u672c\u884c\u6765\u5224\u65ad\u5206\u6d41\u5230\u4e0d\u540c\u670d\u52a1\uff08\u4e0a\u9762\u7684\u67d0\u4e2a upstream\uff09\n    server_name 127.0.0.1;\n\n    client_max_body_size 100m;\n\n    if ( $uri = '/' ) {\n        rewrite / /index.html last;\n    }\n\n    location / {\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header REMOTE-HOST $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\n        proxy_next_upstream error timeout invalid_header http_500 http_503;\n\n        proxy_pass http://be_upstream;\n    }\n\n    location ~* ^.+\\.(html|htm|gif|jpg|jpeg|bmp|png|ico|txt|js|css|woff|woff2|eot|svg|ttf|mp4|avi|mov)$ {\n        #proxy_pass http://YourProject-web-release.oss-cn-shanghai-internal.aliyuncs.com; # \u751f\u4ea7\u73af\u5883\u65f6\u4f7f\u7528\u5185\u90e8 oss \u7f51\u5740\u4ee5\u8282\u7701 oss \u6d41\u91cf\n        proxy_pass http://YourProject-web-release.oss-cn-shanghai.aliyuncs.com; # \u8c03\u8bd5\u73af\u5883\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee\u5185\u90e8 oss \u7f51\u5740\uff0c\u6240\u4ee5\u9700\u8981\u6b64\u884c\n\n        # \u4e3b\u8981\u7f13\u5b58\u7684\u662f\u7528\u6237\u901a\u8fc7\u7f51\u9875\u8bbf\u95ee\u65f6\u7684 react-web \u6253\u5305\u7684 index.html \u548c bundle.js \uff0c\u56e0\u6b64\u8fd9\u91cc\u4e00\u822c\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u53d1\u7248\u7684\u95f4\u9694\u65f6\u95f4\n        expires 30d;\n    }\n}\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u4e0a\u9762 ",(0,c.jsx)(n.code,{children:"nginx.conf"})," \u8d77\u5230\u4e86\u524d\u540e\u7aef\u5206\u6d41\u7684\u4f5c\u7528\uff1a\u5bf9\u4e8e\u540e\u7aef\u7684\u8bbf\u95ee\u6bd4\u5982 ",(0,c.jsx)(n.code,{children:"www.YourProject.com/api/some-api/"})," \uff0c\u5728\u7ecf\u8fc7\u540e\u7eed\u4f1a\u63d0\u5230\u7684 Kubernetes \u90e8\u7f72\u540e\uff0c\u8fdb\u5165\u4e86\u6b64\u5904 ",(0,c.jsx)(n.code,{children:"ip\u5730\u5740:8010"})," \u91cc\u7684 ",(0,c.jsx)(n.code,{children:"nginx.conf"})," \u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"location /"})," \u800c\u88ab\u5206\u6d41\u5411\u540e\u7aef\u670d\u52a1 nodeapp \u5f00\u542f\u7684 1234 \u7aef\u53e3\uff1b\u540c\u7406\uff0c\u5bf9\u4e8e\u524d\u7aef\u7684\u8bbf\u95ee\u6bd4\u5982 ",(0,c.jsx)(n.code,{children:"www.YourProject.com"})," \u6700\u7ec8\u4f1a\u5728 ",(0,c.jsx)(n.code,{children:"nginx.conf"})," \u4e2d\u53d8\u6210\u5bf9 ",(0,c.jsx)(n.code,{children:"/index.html"})," \u7684\u8bbf\u95ee\u800c\u88ab\u5206\u6d41\u5411\u4fdd\u5b58\u7740\u524d\u7aef\u9759\u6001\u6587\u4ef6\u7684\u7f51\u76d8\u6bd4\u5982\u6b64\u5904\u7684 oss \u5730\u5740\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"https://stackoverflow.com/questions/9543068/nginx-proxy-pass-to-cdn-vs-hitting-cdn-directly-pros-cons-is-it-slower-or-a",children:"Nginx Proxy_Pass to CDN vs hitting CDN directly. Pro's, Con's, Is it slower or are there negative effects on the server"})," \u4e00\u6587\uff0c\u4e3a\u4e86\u907f\u514d\u524d\u7aef\u9759\u6001\u6587\u4ef6\u4ece oss \u53d6\u51fa\u540e\u8fd8\u8981\u6d41\u7ecf\u5360\u7528 nginx \u7684\u8d44\u6e90\u6765\u63d0\u4f9b\u7ed9\u6d4f\u89c8\u5668\uff0c\u4ee5\u53ca\u901a\u8fc7 CDN \u6765\u8bbf\u95ee\u5176\u56de\u6e90\u7684\u8d1f\u8f7d\u5747\u8861\u63d0\u4f9b\u7684\u540e\u7aef API \u6027\u80fd\u76f8\u6bd4\u76f4\u63a5\u901a\u8fc7\u8d1f\u8f7d\u5747\u8861\u6765\u8bbf\u95ee\u4f1a\u5dee 6 \u500d\u751a\u81f3\u53ef\u80fd\u4f1a\u51fa\u9519\u7684\u95ee\u9898\uff0c\u5219\u53ef\u4ee5\u629b\u5f00\u672c\u6587\u63d0\u4f9b\u7684\u524d\u540e\u7aef\u8bbf\u95ee\u540c\u4e00\u57df\u540d\u5e26\u6765\u7684\u65e0\u9700\u8003\u8651\u8de8\u57df\u8bbf\u95ee CORS \u9650\u5236\u800c\u8ba9\u7f16\u7801\u3001\u8c03\u8bd5\u66f4\u65b9\u4fbf\u7684\u4f18\u70b9\uff0c\u518d\u53bb\u53e6\u5916\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"/g/docs/i%E4%B8%BB%E8%A7%82%E7%9A%84%E4%BD%93%E9%AA%8C%E6%96%B9%E5%BC%8F/t%E5%BF%AB%E4%B9%90%E7%9A%84%E4%BD%93%E9%AA%8C/%E7%94%B5%E4%BF%A1/Tool/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/Git/%E5%89%8D%E7%AB%AFCDN%E7%BD%91%E5%9D%80%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE%E5%90%8E%E7%AB%AFnodejs%E5%BA%94%E7%94%A8%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%BD%91%E5%9D%80%E7%9A%84%E6%96%B9%E6%B3%95",children:"\u524d\u7aef CDN \u7f51\u5740\u8de8\u57df\u8bbf\u95ee\u540e\u7aef nodejs \u5e94\u7528\u8d1f\u8f7d\u5747\u8861\u7f51\u5740\u7684\u65b9\u6cd5"})," \u4e00\u6587\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u90e8\u7f72\u524d\u7aef\u9759\u6001\u6587\u4ef6\u5230-oss-\u4e2d",children:"\u90e8\u7f72\u524d\u7aef\u9759\u6001\u6587\u4ef6\u5230 OSS \u4e2d"}),"\n",(0,c.jsxs)(n.p,{children:["\u524d\u7aef\u9759\u6001\u6587\u4ef6\u7531 gitlab \u81ea\u52a8\u90e8\u7f72\u811a\u672c ",(0,c.jsx)(n.code,{children:".gitlab-ci.yml"})," \u81ea\u52a8\u751f\u6210\u5e76\u4e0a\u4f20\u5230 OSS \u4e2d\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'deploy-k8s-frontend:\n  stage: deploy\n  cache:\n    key: frontend\n    paths:\n      - node_modules/\n  tags:\n    - docker\n  script:\n    - rm -f public/bundle.js public/index.html\n    - npm run build-web # \u8fd9\u4e2a\u547d\u4ee4\u53c2\u8003\u81ea https://github.com/flyskywhy/noder-react-native\n    - if [ -f public/bundle.js ]; then true; else false; fi\n    - export PROJ_GIT_HASH=`git rev-parse --short HEAD`\n    - sed -i "s/bundle.js/bundle.js?v=$PROJ_GIT_HASH/" public/index.html\n    - set +o pipefail\n    - yes | /cache/opt/ossutil64 cp -r public/ oss://YourProject-web-release/ -e oss-cn-shanghai.aliyuncs.com\n     -i $ALIYUN_OSS_ACCESSKEYID -k $ALIYUN_OSS_ACCESSKEYSECRET\n    - set -o pipefail\n  only:\n    - k8s-frontend\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u8fd8\u9700\u5bf9\u90e8\u7f72\u4e86\u524d\u7aef\u6587\u4ef6\u7684 OSS \u8fdb\u884c\u914d\u7f6e\uff1a\u8fdb\u5165 ",(0,c.jsx)(n.a,{href:"https://oss.console.aliyun.com",children:"\u5bf9\u8c61\u5b58\u50a8 OSS"})," \u7684 ",(0,c.jsx)(n.code,{children:"YourProject-web-release"})," \u7684 ",(0,c.jsx)(n.code,{children:"\u57fa\u7840\u8bbe\u7f6e | \u9759\u6001\u9875\u9762"})," \uff0c\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"\u9ed8\u8ba4\u9996\u9875"})," \u4e3a ",(0,c.jsx)(n.code,{children:"index.html"})," \uff1b\u5982\u679c\u4e0d\u60f3\u8ba9\u7528\u6237\u89c1\u5230 OSS \u63d0\u4f9b\u7684\u9ed8\u8ba4\u7684\u4ee3\u66ff 404 \u7684\u7f51\u9875 \u201cThis XML file does not appear to have any style information associated with it\u201d \uff0c\u5219\u8fd8\u53ef\u4ee5\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"\u9ed8\u8ba4 404 \u9875"})," \u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u90e8\u7f72\u540e\u7aef\u955c\u50cf\u5230-kubernetes-\u4e2d",children:"\u90e8\u7f72\u540e\u7aef\u955c\u50cf\u5230 Kubernetes \u4e2d"}),"\n",(0,c.jsxs)(n.p,{children:["\u963f\u91cc\u4e91 Kubernetes \u7684\u4f7f\u7528\u8d39\u7528\u662f\u6bd4\u8f83\u6602\u8d35\u7684\uff0c\u56e0\u4e3a\u65e0\u8bba\u662f\u624b\u52a8\u7ec4\u5efa Kubernetes \u7684\u8fd9\u7bc7 ",(0,c.jsx)(n.a,{href:"https://www.kubernetes.org.cn/1667.html",children:"\u5728\u963f\u91cc\u4e91\u4e0a\u90e8\u7f72\u751f\u4ea7\u7ea7\u522bKubernetes\u96c6\u7fa4"})," \u6587\u7ae0 \uff0c\u8fd8\u662f\u5728\u963f\u91cc\u4e91\u91cc\u8d2d\u4e70 Kubernetes \u65f6\u7684\u81ea\u52a8\u914d\u7f6e\uff0c\u6240\u9700\u7684 ECS \uff08\u7535\u8111\u4e3b\u673a\uff09\u90fd\u81f3\u5c11\u662f 3 \u53f0\u7528\u4e8e Master \u4ee5\u53ca 1 \u53f0\u7528\u4e8e\u771f\u6b63\u90e8\u7f72\u4e0a\u767e\u4e2a docker \u5bb9\u5668\u7684 Worker \u3002\u56e0\u4e3a\u53ea\u7528 1 \u53f0 Worker \u4f53\u73b0\u4e0d\u51fa\u6765 Kubernetes \u7684\u610f\u4e49\uff0c\u6240\u4ee5\u963f\u91cc\u4e91\u8d2d\u4e70\u65f6\u7684\u6807\u914d\u662f 3Master+3Worker \u3002\u56e0\u4e3a Master \u7684\u914d\u7f6e\u5728\u8d2d\u4e70\u540e\u65e0\u6cd5\u66f4\u6539\uff0c\u4e3a\u4e86\u4ee5\u540e\u6027\u80fd\u8003\u8651\uff0c\u53ea\u80fd\u5728\u8d2d\u4e70\u65f6\u4e00\u6b65\u5230\u4f4d\u4f7f\u7528\u5b83\u9ed8\u8ba4\u7684 ",(0,c.jsx)(n.code,{children:"4\u68388G(ecs.n4.xlarge)"})," \u914d\u7f6e\u3002\u4f8b\u5982\u4ee5 6 \u53f0 ECS \u5171 10\u5143/\u5c0f\u65f6 \u7684\u8d39\u7528\u6765\u63a8\u7b97\uff0c 3Master+3Worker \u7684\u8d39\u7528\u4e3a 9\u4e07\u5143/\u5e74 \u5de6\u53f3\u3002\u4ece ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/69575.html",children:"\u963f\u91cc\u4e91 Kubernetes VS \u81ea\u5efa Kubernetes"})," \u8fd9\u7bc7\u6587\u7ae0\u53ef\u4ee5\u770b\u51fa\uff0c Kubernetes \u7684\u8d8b\u52bf\u662f\u6162\u6162\u53d8\u6210\u4e91\u670d\u52a1\u5546\u7684\u4e00\u4e2a\u4ea7\u54c1\uff0c\u5c31\u50cf\u6570\u636e\u5e93\u3001 CDN \u7b49\u4ea7\u54c1\u90a3\u6837\uff0c\u56e0\u6b64\u81ea\u5df1\u8d2d\u4e70 6 \u53f0\u670d\u52a1\u5668\u518d\u8bf7\u4e13\u4e1a\u8fd0\u7ef4\u4eba\u5458\uff0810\u4e07/\u5e74\uff1f\uff09\u521b\u5efa\u3001\u7ef4\u62a4\u3001\u5347\u7ea7 Kubernetes \u7684\u6027\u4ef7\u6bd4\u4f4e\u4e8e\u76f4\u63a5\u4f7f\u7528\u963f\u91cc\u4e91 Kubernetes \u3002\u597d\u6d88\u606f\u662f\u73b0\u5728\u6709\u6bd4\u963f\u91cc\u4e91 Kubernetes \u6027\u4ef7\u6bd4\u66f4\u9ad8\u7684\u4ea7\u54c1\u2014\u2014\u963f\u91cc\u4e91 Serverless Kubernetes \u2014\u2014\u4e0d\u7528\u8d2d\u4e70 ECS \u800c\u662f\u6309\u9700\u4ed8\u8d39\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u963f\u91cc\u4e91-kubernetes",children:"\u963f\u91cc\u4e91 Kubernetes"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/53752.html",children:"\u521b\u5efaKubernetes\u96c6\u7fa4"})," \u65f6\uff0c Pod \u548c Service \u7684\u7f51\u6bb5\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u8bbe\u7f6e\uff1a"]}),"\n",(0,c.jsxs)(n.p,{children:["Pod \u7f51\u7edc CIDR\uff1a 10.0.0.0/16 \uff0c\u5982\u6b64\u8bbe\u7f6e\uff0c\u5c31\u7b97\u7c7b\u4f3c ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail",children:"\u7ba1\u7406\u4e13\u6709\u7f51\u7edc"})," \u90a3\u91cc\u90a3\u6837\u5b58\u5728\u6709\u7cfb\u7edf\u4fdd\u7559\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u4fdd\u8bc1\u6bcf\u4e2a\u96c6\u7fa4\u5185\u6700\u591a\u53ef\u5141\u8bb8\u90e8\u7f72 256 \u53f0\u4e3b\u673a\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"Service \u7f51\u7edc CIDR\uff1a 10.1.0.0/16 \uff0c\u5982\u6b64\u8bbe\u7f6e\u6bd4\u8f83\u5bb9\u6613\u7ba1\u7406\uff0c\u4eca\u540e\u5982\u679c\u521b\u5efa\u7b2c 2 \u4e2a\u96c6\u7fa4\uff0c\u90a3\u4e48\u5b83\u7684 Pod \u548c Service \u5c31\u5206\u522b\u662f"}),"\n",(0,c.jsx)(n.p,{children:"10.2.0.0/16\n10.3.0.0/16"}),"\n",(0,c.jsx)(n.p,{children:"\u5982\u679c\u521b\u5efa\u7b2c 3 \u4e2a\u96c6\u7fa4\uff0c\u90a3\u5c31\u662f"}),"\n",(0,c.jsx)(n.p,{children:"10.4.0.0/16\n10.5.0.0/16"}),"\n",(0,c.jsx)(n.p,{children:"\u4ee5\u6b64\u7c7b\u63a8\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u53c2\u8003\u64b0\u5199 ",(0,c.jsx)(n.a,{href:"https://code.aliyun.com/CodePipeline/nodejs-demo/blob/master/deployment.yaml",children:"deployment.yaml"})," \uff0c\u7136\u540e\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/73980.html",children:"Kubernetes\u96c6\u7fa4\u4e2d\u4f7f\u7528\u963f\u91cc\u4e91 SLB \u5b9e\u73b0\u56db\u5c42\u91d1\u4e1d\u96c0\u53d1\u5e03"})," \u56fe\u5f62\u5316\u90e8\u7f72\u5728\u963f\u91cc\u4e91\u4e2d\u7684\u5de5\u4f5c\u539f\u7406\uff0c\u518d\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/",children:"Connecting Applications with Services"})," \u3001 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/",children:"Deployments"})," \u3001 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/services-networking/service/",children:"Services"})," \u8fd9\u4e9b\u6587\u7ae0\u7f16\u5199\u9002\u5408\u81ea\u5df1\u9879\u76ee\u7684 ",(0,c.jsx)(n.code,{children:"deployment.yaml"})," \uff0c\u7136\u540e\u5728\u81ea\u52a8\u90e8\u7f72\u811a\u672c\u4e2d\u914d\u7f6e\u597d ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/53755.html",children:"\u901a\u8fc7 kubectl \u8fde\u63a5 Kubernetes \u96c6\u7fa4"})," \u540e\uff08\u914d\u7f6e\u7684\u542b\u4e49\u89c1 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/cn/docs/tasks/access-application-cluster/configure-access-multiple-clusters/",children:"\u914d\u7f6e\u5bf9\u591a\u96c6\u7fa4\u7684\u8bbf\u95ee"})," \u4e00\u6587\uff09\uff0c\u6309\u7167 ",(0,c.jsx)(n.a,{href:"https://k8smeetup.github.io/docs/concepts/configuration/overview/",children:"\u914d\u7f6e\u6700\u4f73\u5b9e\u8df5"})," \u6240\u8bf4\u7528 ",(0,c.jsx)(n.code,{children:"kubectl create -f ./deployment.yaml"})," \u8fd0\u884c\u540e\u7aef\u955c\u50cf\uff0c\u6216\u662f\u4e0d\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"deployment.yaml"})," \u800c\u662f\u76f4\u63a5\u8c61 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/access-application-cluster/service-access-application-cluster/",children:"Use a Service to Access an Application in a Cluster"})," \u90a3\u6837\u7528 ",(0,c.jsx)(n.code,{children:"kubectl run"})," \u3001 ",(0,c.jsx)(n.code,{children:"kubectl expose"})," \u3001 ",(0,c.jsx)(n.code,{children:"kubectl set"})," \u547d\u4ee4\u884c\u6765\u542f\u52a8/\u66f4\u65b0 deployment \u548c service \uff08\u6b64\u5904\u53ef\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"http://docs.kubernetes.org.cn/70.html",children:"Kubernetes kubectl \u4e0e Docker \u547d\u4ee4\u5173\u7cfb"})," \u4e00\u6587\uff09\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u963f\u91cc\u4e91-serverless-kubernetes",children:"\u963f\u91cc\u4e91 Serverless Kubernetes"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 ",(0,c.jsx)(n.a,{href:"https://cs.console.aliyun.com",children:"\u5bb9\u5668\u670d\u52a1 - Kubernetes"})," \u4e2d \u201c\u521b\u5efaServerless Kubernetes\u201d \u540e\uff0c ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/71483.html",children:"\u901a\u8fc7 kubectl \u8fde\u63a5 Kubernetes \u96c6\u7fa4"})," \uff0c\u7136\u540e\u53c2\u8003 ",(0,c.jsx)(n.a,{href:"https://github.com/AliyunContainerService/serverless-k8s-examples",children:"Serverless Kubernetes Examples"})," \u7f16\u5199\u9002\u5408\u81ea\u5df1\u9879\u76ee\u7684 ",(0,c.jsx)(n.code,{children:"deployment.yaml"})," \u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/86383.html",children:"\u4f7f\u7528\u955c\u50cf\u521b\u5efa\u5e94\u7528"})," \u65f6\u7684 ",(0,c.jsx)(n.code,{children:"\u5e94\u7528\u914d\u7f6e"})," \u9875\u9762\u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"Init Container"})," \u5bf9\u5e94 yaml \u5199\u6cd5\u89c1 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/cn/docs/concepts/workloads/pods/init-containers/",children:"Init \u5bb9\u5668"})," \uff1b ",(0,c.jsx)(n.code,{children:"\u5b58\u6d3b\u68c0\u67e5"})," \u548c ",(0,c.jsx)(n.code,{children:"\u5c31\u7eea\u68c0\u67e5"})," \u5bf9\u5e94 yaml \u5199\u6cd5\u89c1 ",(0,c.jsx)(n.a,{href:"https://kubernetes.io/cn/docs/concepts/workloads/pods/pod-lifecycle/",children:"Pod \u7684\u751f\u547d\u5468\u671f"})," \u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u7531\u4e8e\u66f4\u65b0 service \u65f6\u4f1a\u51fa\u73b0 ",(0,c.jsx)(n.code,{children:'spec.clusterIP: Invalid value: "": field is immutable'})," \u8fd9\u4e2a\u5df2\u77e5 k8s \u7684 BUG \uff0c\u6240\u4ee5\u5c06 ",(0,c.jsx)(n.code,{children:"deployment.yaml"})," \u62c6\u5206\u4e3a deploy.yaml \u548c svc.yaml \u4f1a\u66f4\u65b9\u4fbf\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u793a\u4f8b deploy.yaml \u5982\u4e0b\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'apiVersion: apps/v1beta2\nkind: Deployment\nmetadata:\n  name: nodeapp-deployment\n  labels:\n    app: nodeapp\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nodeapp\n  template:\n    metadata:\n      labels:\n        app: nodeapp\n    spec:\n      # \u5982\u679c\u4f7f\u7528\u7684\u662f\u963f\u91cc\u4e91\u4ee5\u5916\u7684\u79c1\u6709\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93\uff0c\u5219\u9700\u8981 imagePullSecrets \uff0c\u6b64\u5904 `docker-registrykey-\u79c1\u6709\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93`\n      # \u6765\u81ea\u4e8e\u547d\u4ee4 `kubectl create secret docker-registry docker-registrykey-\u79c1\u6709\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93 --docker-server=\u79c1\u6709\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93\u5730\u5740 --docker-username=\u79c1\u6709\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93\u7528\u6237\u540d --docker-password=\u79c1\u6709\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93\u5bc6\u7801`\n      # imagePullSecrets:\n      #   - name: docker-registrykey-\u79c1\u6709\u5bb9\u5668\n      containers:\n        - name: nodeapp\n          image: registry-vpc.cn-shanghai.aliyuncs.com/\u4f60\u7684\u547d\u540d\u7a7a\u95f4/\u79c1\u6709\u5bb9\u5668\u955c\u50cf:latest\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 8010\n          # \u6ce8\u610f\uff0c\u5982\u679c\u76f4\u63a5\u5728\u963f\u91cc\u4e91\u63a7\u5236\u53f0\u5bb9\u5668\u670d\u52a1\u66f4\u65b0\u201c\u90e8\u7f72\u201d\u4f1a\u5bfc\u81f4\u73af\u5883\u53d8\u91cf\u4e3a\u7a7a\n          # env:\n          #   - name: DEMO_GREETING\n          #     value: "Hello from the environment"\n          #   - name: NODE_ENV\n          #     valueFrom:\n          #       configMapKeyRef:\n          #         name: config-some\n          #         key: NODE_ENV\n          #   - name: SERVER_PORT\n          #     valueFrom:\n          #       secretKeyRef:\n          #         name: secret-some\n          #         key: SERVER_PORT\n          envFrom:\n            - configMapRef:\n                name: config-some\n            - secretRef:\n                name: secret-some\n---\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: nodeapp-autoscaler\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1beta2\n    kind: Deployment\n    name: nodeapp-deployment\n  minReplicas: 1\n  maxReplicas: 5\n  metrics:\n  - type: Resource\n    resource:\n      name: memory\n      targetAverageUtilization: 50\n  - type: Resource\n    resource:\n      name: cpu\n      targetAverageUtilization: 50\n  - type: Pods\n    pods:\n      metricName: packets-per-second\n      targetAverageValue: 1k\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u4e0a\u9762\u7684 ",(0,c.jsx)(n.code,{children:"nodeapp-autoscaler"})," \u53c2\u8003\u81ea ",(0,c.jsx)(n.a,{href:"https://k8smeetup.github.io/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/",children:"Pod\u6c34\u5e73\u81ea\u52a8\u4f38\u7f29\uff08Horizontal Pod Autoscaling\uff09\u6f14\u7ec3"})," \u53ca ",(0,c.jsx)(n.a,{href:"http://blog.51cto.com/ylw6006/2113848",children:"K8S\u96c6\u7fa4\u57fa\u4e8eheapster\u7684HPA\u6d4b\u8bd5"})," \u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u793a\u4f8b svc.yaml \u5982\u4e0b\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'apiVersion: v1\nkind: Service\nmetadata:\n  name: nodeapp-service\n  annotations:\n    # service.beta.kubernetes.io/alicloud-loadbalancer-protocol-port: "http:80"\n\n    # \u5728\u963f\u91cc\u4e91\u201cSSL\u8bc1\u4e66\u201d\u4e2d\u8d2d\u4e70\u8bc1\u4e66\u540e\u63a8\u9001\u5230\u8d1f\u8f7d\u5747\u8861\uff0c\u7136\u540e\u5728\u8d1f\u8f7d\u5747\u8861\u9875\u9762\u7684\u8bc1\u4e66\u7ba1\u7406\u4e2d\u53ef\u4ee5\u5f97\u5230\u4e0b\u9762\u6240\u9700\u7684\u8bc1\u4e66ID\n    service.beta.kubernetes.io/alicloud-loadbalancer-cert-id: ${\u8bc1\u4e66ID}\n    service.beta.kubernetes.io/alicloud-loadbalancer-protocol-port: "https:443"\n\n    # \u5148\u6ce8\u91ca\u6389\u672c\u884c\u6ce8\u89e3\u540e kubectl create \u521b\u5efa\u4e00\u4e2a\u65b0 SLB \u5b9e\u4f8b\uff0c\u7136\u540e\u4e3a\u4e86\u907f\u514d\u4eca\u540e kubectl replace --force\n    # \u6216 kubectl delete \u65f6\u81ea\u52a8\u5220\u9664\u8be5 SLB \u5b9e\u4f8b\uff0c\u9700\u8981\u5230\u963f\u91cc\u4e91\u63a7\u5236\u53f0\u8d1f\u8f7d\u5747\u8861\u9875\u9762\u5c06\u8be5 SLB \u7684\u201c\u540d\u79f0\u201d\u4fee\u6539\u6389\uff0c\n    # \u5c06\u201c\u6807\u7b7e\u201d\u5220\u9664\u6389\uff0c\u7136\u540e kubectl delete \u65f6\u5c31\u4e0d\u4f1a\u5220\u9664\u8be5 SLB \u5b9e\u4f8b\u4e86\u3002\n    # \u6700\u540e\uff0c\u4e3a\u4e86\u540e\u7eed\u4e00\u76f4\u4f7f\u7528\u8be5\u65b0\u5efa\u7684 SLB \u5b9e\u4f8b\u6bd4\u5982 lb-bp1hfycf39bbeb019pg7m \uff0c\u5c31\u518d\u540c\u65f6\u5f00\u542f\u4f7f\u7528\u4e0b\u9762\u7684\u6ce8\u89e3\n    # service.beta.kubernetes.io/alicloud-loadbalancer-id: lb-bp1hfycf39bbeb019pg7m\nspec:\n  ports:\n    - port: 80\n      name: http-port\n      targetPort: 8010\n      protocol: TCP\n    - port: 443\n      name: https-port\n      targetPort: 8010\n      protocol: TCP\n  selector:\n    app: nodeapp\n  type: LoadBalancer\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u5728\u552f\u4e00\u4e00\u6b21\u624b\u5de5 ",(0,c.jsx)(n.code,{children:"kubectl create -f svc.yaml"})," \u521b\u5efa\u4e00\u4e2a\u65b0 SLB \u5b9e\u4f8b\u540e\u5c31\u6309 ",(0,c.jsx)(n.code,{children:"svc.yaml"})," \u4e2d\u7684\u6ce8\u91ca\u4fee\u6539\u8be5\u6587\u4ef6\u4ee5\u7ed9\u81ea\u52a8\u90e8\u7f72\u811a\u672c\u8c03\u7528\u4e86\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u8ba9\u5176\u4ed6\u963f\u91cc\u4e91\u4ea7\u54c1\u80fd\u591f\u8bbf\u95ee-kubernetes-pod",children:"\u8ba9\u5176\u4ed6\u963f\u91cc\u4e91\u4ea7\u54c1\u80fd\u591f\u8bbf\u95ee Kubernetes pod"}),"\n",(0,c.jsxs)(n.p,{children:["\u628a\u4e13\u6709\u7f51\u7edc VPC\uff08Virtual Private Cloud\uff09\u7684 ",(0,c.jsx)(n.a,{href:"https://vpcnext.console.aliyun.com/vpc/cn-shanghai/route-tables",children:"\u8def\u7531\u8868"})," \u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"\u76ee\u6807\u7f51\u6bb5"})," \u6dfb\u52a0\u5230\u76f8\u5173\u963f\u91cc\u4e91\u4ea7\u54c1\u6bd4\u5982 ",(0,c.jsx)(n.a,{href:"https://rdsnext.console.aliyun.com",children:"\u4e91\u6570\u636e\u5e93RDS"})," \u3001 ",(0,c.jsx)(n.a,{href:"https://mongodb.console.aliyun.com",children:"\u4e91\u6570\u636e\u5e93MongoDB"})," \u7b49\u7b49\u7684\u767d\u540d\u5355\u4e2d\uff0c\u8fd9\u6837\u4f7f\u7528\u7740 VPC \u5730\u5740\u7684 pod \u5c31\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\u8fd9\u4e9b\u4ea7\u54c1\u4e86\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u8ba9-kubernetes-pod-\u80fd\u591f\u8bbf\u95ee\u5916\u7f51",children:"\u8ba9 Kubernetes pod \u80fd\u591f\u8bbf\u95ee\u5916\u7f51"}),"\n",(0,c.jsxs)(n.p,{children:["\u5982\u679c\u60f3\u8ba9 pod \u80fd\u591f\u8bbf\u95ee\u5916\u7f51\uff0c\u9700\u8981\u5f00\u901a ",(0,c.jsx)(n.a,{href:"https://vpcnext.console.aliyun.com/nat/cn-shanghai/nats",children:"NAT\u7f51\u5173"})," \uff0c\u5e76\u8d2d\u4e70\u4e00\u4e2a ",(0,c.jsx)(n.a,{href:"https://ip.console.aliyun.com",children:"\u5f39\u6027\u516c\u7f51IP"})," \u7ed1\u5b9a\u5230 NAT \u7684 SNAT \u4e0a\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"log",children:"log"}),"\n",(0,c.jsxs)(n.p,{children:["\u4ece\u8fd9\u7bc7\u6587\u7ae0 ",(0,c.jsx)(n.a,{href:"https://blog.csdn.net/zhoushuntian/article/details/79400747",children:"\u5168\u9762\u63d0\u5347\uff0c\u963f\u91cc\u4e91Docker/Kubernetes(K8S) \u65e5\u5fd7\u89e3\u51b3\u65b9\u6848\u4e0e\u9009\u578b\u5bf9\u6bd4"})," \u770b\uff0c\u963f\u91cc\u4e91 logtail \u4ea7\u54c1 ",(0,c.jsx)(n.a,{href:"https://sls.console.aliyun.com",children:"\u65e5\u5fd7\u670d\u52a1"}),"\u6bd4 logstash \u66f4\u9002\u5408 k8s \u5bb9\u5668\u73af\u5883\uff0c\u800c\u4e14\u8fd9\u6837\u5c31\u4e0d\u7528\u8d39\u5fc3\u53bb\u505a\u542b\u6709 rsyslogd \u7a0b\u5e8f\u7684 docker \u955c\u50cf\u4e86\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u672c\u6587\u4e3b\u8981\u8bb2\u89e3 Serverless Kubernetes \u7684 log \u65b9\u6cd5\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"\u963f\u91cc\u4e91-kubernetes-\u7684-log",children:"\u963f\u91cc\u4e91 Kubernetes \u7684 log"}),"\n",(0,c.jsxs)(n.p,{children:["\u8be6\u9605 ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/66654.html",children:"Kubernetes\u65e5\u5fd7\u91c7\u96c6"})," \uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002"]}),"\n",(0,c.jsx)(n.h3,{id:"\u963f\u91cc\u4e91-serverless-kubernetes-\u7684-log",children:"\u963f\u91cc\u4e91 Serverless Kubernetes \u7684 log"}),"\n",(0,c.jsxs)(n.p,{children:["\u56e0\u4e3a\u7ecf\u963f\u91cc\u4e91\u5ba2\u670d\u5de5\u5355\u6838\u5b9e\uff0c\u963f\u91cc\u4e91\u65e5\u5fd7\u670d\u52a1\u4e0d\u652f\u6301\u91c7\u96c6 Serverless Kubernetes \u7684",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/66658.html",children:"\u5bb9\u5668-\u6807\u51c6\u8f93\u51fa"}),"\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ea\u80fd\u8bb0\u5f55\u4e0b ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/71502.html",children:"\u901a\u8fc7\u963f\u91cc\u4e91\u65e5\u5fd7\u670d\u52a1\u91c7\u96c6\u65e5\u5fd7"})," \u5bf9\u6587\u672c ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/28981.html",children:"\u91c7\u96c6\u65b9\u5f0f"})," \u7684\u5b9e\u8df5\u8fc7\u7a0b\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6b65\u9aa4 1 ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/48984.html",children:"\u64cd\u4f5cProject"})," \u521b\u5efa YourProject \u9879\u76ee\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6b65\u9aa4 2 ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/48990.html",children:"\u64cd\u4f5cLogstore"})," \u521b\u5efa dev-access \u65e5\u5fd7\u5e93\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6b65\u9aa4 3 \u4ee5\u673a\u5668\u7ec4\u540d\u79f0 dev ",(0,c.jsx)(n.a,{href:"https://help.aliyun.com/document_detail/28966.html",children:"\u521b\u5efa\u673a\u5668\u7ec4"})," \uff0c\u5e76\u5c06\u7528\u6237\u81ea\u5b9a\u4e49\u6807\u8bc6\u8bbe\u4e3a YourProject-dev \uff0c\u8be5\u7528\u6237\u81ea\u5b9a\u4e49\u6807\u8bc6\u540e\u9762\u5c06\u4f1a\u88ab\u914d\u7f6e\u5230 YAML \u73af\u5883\u53d8\u91cf ALIYUN_LOGTAIL_USER_DEFINED_ID \u4e2d\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u6b65\u9aa4 4 \u521b\u5efa Logtail \u914d\u7f6e\uff0c\u6570\u636e\u7c7b\u578b\u9009\u62e9 ",(0,c.jsx)(n.code,{children:"Docker\u6587\u4ef6"})," \uff1b\u4e0b\u4e00\u6b65\uff0c\u914d\u7f6e\u540d\u79f0\u586b\u5199 ",(0,c.jsx)(n.code,{children:"dev-access"})," \uff0c\u65e5\u5fd7\u8def\u5f84\u586b\u5199 ",(0,c.jsx)(n.code,{children:"/ecilogs"})," \u548c ",(0,c.jsx)(n.code,{children:"access.log"})," \uff0c\u6a21\u5f0f\u53ef\u4ee5\u5148\u9009\u62e9 ",(0,c.jsx)(n.code,{children:"\u6781\u7b80\u6a21\u5f0f"})," \u4f7f\u5f97\u65e5\u5fd7\u5185\u5bb9\u5c55\u793a\u539f\u59cb\u7684\u4e00\u884c log \uff0c\u5982\u679c\u4f60\u7684 log \u662f JSON \u683c\u5f0f\u7684\u8bdd\uff0c\u7a0d\u540e\u53ef\u4ee5\u518d\u56de\u6765\u4fee\u6539\u4e3a ",(0,c.jsx)(n.code,{children:"JSON\u6a21\u5f0f"})," \uff0c\u7136\u540e\u4f60\u5c31\u4f1a\u770b\u5230\u65b0\u7684\u65e5\u5fd7\u5185\u5bb9\u53d8\u6210\u4e86\u591a\u884c\u7684 kev-value \u683c\u5f0f\uff1b\u4e0b\u4e00\u6b65\uff0c\u5e94\u7528\u5230 dev \u673a\u5668\u7ec4\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u6b65\u9aa4 5 \u5728\u4e0a\u9762\u7684 deploy.yaml \u4e2d\u7684 spec.template.spec \u91cc\u4fee\u6539\u4e3a\u5982\u4e0b\u914d\u7f6e\uff1a"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'      containers:\n        - name: ilogtail\n          image: registry.cn-hangzhou.aliyuncs.com/acs/ilogtail:0.13.4-eb42407\n          env:\n            - name: ALIYUN_REGION_ID\n              value: ${https://help.aliyun.com/document_detail/40654.html \u4e2d\u63cf\u8ff0\u7684 k8s \u96c6\u7fa4\u6240\u5728\u7684\u5730\u57dfID}\n            - name: ALIYUN_LOGTAIL_USER_ID\n              value: "${https://account.console.aliyun.com \u4e2d\u6240\u793a\u7684\u963f\u91cc\u4e91\u8d26\u53f7ID\uff08\u4e0d\u662f\u8d26\u53f7\u540d\uff0c\u800c\u4e14\u56e0\u4e3aID\u662f\u4e00\u4e32\u6570\u5b57\uff0c\u800c\u8fd9\u91cc\u9700\u8981\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5\u8bb0\u5f97\u52a0\u53cc\u5f15\u53f7\uff09}"\n            - name: ALIYUN_LOGTAIL_USER_DEFINED_ID\n              value: YourProject-dev\n          volumeMounts:\n            - name: app-log\n              mountPath: /ecilogs\n              readOnly: true\n        - name: nodeapp\n...\n            - secretRef:\n                name: secret-some\n          volumeMounts:\n            - name: app-log\n              mountPath: /log\n      volumes:\n        - name: app-log\n          emptyDir: {}\n\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u73b0\u5728\uff0c\u5728\u65e5\u5fd7\u5e93\u4e2d\u70b9\u51fb dev-access \u7684 ",(0,c.jsx)(n.code,{children:"\u67e5\u8be2"})," \uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u65e5\u5fd7\u5185\u5bb9\u4e86\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(6540);const c={},t=r.createContext(c);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);