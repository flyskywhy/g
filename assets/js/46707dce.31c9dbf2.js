"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[949],{8280:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos/CLONE_COMPILE_RUN.en","title":"CLONE_COMPILE_RUN.en","description":"Li Zheng flyskywhy@gmail.com","source":"@site/../g/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos/CLONE_COMPILE_RUN.en.md","sourceDirName":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos","slug":"/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos/CLONE_COMPILE_RUN.en","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos/CLONE_COMPILE_RUN.en","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"CLONE_COMPILE_RUN.cn","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos/CLONE_COMPILE_RUN.cn"},"next":{"title":"eCos\u4f7f\u7528\u8be6\u89e3","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Os/Ecos/eCos\u4f7f\u7528\u8be6\u89e3"}}');var t=o(4848),c=o(8453);const l={},s="0. $SHELL may need to prepare",r={},d=[{value:"1.1 Git the code management tool",id:"11-git-the-code-management-tool",level:2},{value:"1.1.1 msys terminal window",id:"111-msys-terminal-window",level:3},{value:"1.2 Cygwin the Linux environment imitation tool",id:"12-cygwin-the-linux-environment-imitation-tool",level:2},{value:"1.2.1 Can green install cygwin by git",id:"121-can-green-install-cygwin-by-git",level:3},{value:"1.2.2 Can install cygwin by setup.exe",id:"122-can-install-cygwin-by-setupexe",level:3},{value:"1.2.3 cygwin terminal window",id:"123-cygwin-terminal-window",level:3},{value:"2.1 Download the project code unified management tool",id:"21-download-the-project-code-unified-management-tool",level:2},{value:"2.2 Environment settings",id:"22-environment-settings",level:2},{value:"2.3 Batch clone project code by the project code unified management tool",id:"23-batch-clone-project-code-by-the-project-code-unified-management-tool",level:2},{value:"2.3.1 Batch update project code by the project code unified management tool",id:"231-batch-update-project-code-by-the-project-code-unified-management-tool",level:3},{value:"2.4 Directory structure description",id:"24-directory-structure-description",level:2},{value:"2.4.1 Operating system ecos subproject",id:"241-operating-system-ecos-subproject",level:3},{value:"2.4.2 Application ecos_app_base subproject",id:"242-application-ecos_app_base-subproject",level:3},{value:"2.4.3 Tool subproject",id:"243-tool-subproject",level:3},{value:"2.4.4 Microblaze hardware design subproject",id:"244-microblaze-hardware-design-subproject",level:3},{value:"3.1 COMPILE ecos-tools",id:"31-compile-ecos-tools",level:2},{value:"3.1.1 Environment settings",id:"311-environment-settings",level:3},{value:"3.1.2 Compile",id:"312-compile",level:3},{value:"3.2 COMPILE ecos the operating system",id:"32-compile-ecos-the-operating-system",level:2},{value:"3.2.1 Environment settings",id:"321-environment-settings",level:3},{value:"3.2.2 Configuration",id:"322-configuration",level:3},{value:"3.2.2.1 the origin of Xilinx FPGA development board .ecc",id:"3221-the-origin-of-xilinx-fpga-development-board-ecc",level:4},{value:"3.2.2.2 the origin of MIPS development board .ecc",id:"3222-the-origin-of-mips-development-board-ecc",level:4},{value:"3.2.3 Compile",id:"323-compile",level:3},{value:"3.3 COMPILE ecos application",id:"33-compile-ecos-application",level:2},{value:"3.3.1 Environment settings",id:"331-environment-settings",level:3},{value:"3.3.2 Compile",id:"332-compile",level:3},{value:"3.4 ecos application development in eclipse",id:"34-ecos-application-development-in-eclipse",level:2},{value:"3.5 RUN ecos application",id:"35-run-ecos-application",level:2},{value:"3.5.1 Xilinx FPGA development board",id:"351-xilinx-fpga-development-board",level:3},{value:"3.5.1.1 configure JTAG connection",id:"3511-configure-jtag-connection",level:4},{value:"3.5.1.2 download bit file via JTAG",id:"3512-download-bit-file-via-jtag",level:4},{value:"3.5.1.3 download and run ecos application via JTAG graphical interface (operation is relatively simple, but the download time is longer)",id:"3513-download-and-run-ecos-application-via-jtag-graphical-interface-operation-is-relatively-simple-but-the-download-time-is-longer",level:4},{value:"3.5.1.3.1",id:"35131",level:5},{value:"3.5.1.4 download and run ecos application via the JTAG command line interface (operation is more complex, but the download time is shorter)",id:"3514-download-and-run-ecos-application-via-the-jtag-command-line-interface-operation-is-more-complex-but-the-download-time-is-shorter",level:4},{value:"3.5.2 Running on MIPS development board",id:"352-running-on-mips-development-board",level:3},{value:"4.1 Xilinx FPGA development board",id:"41-xilinx-fpga-development-board",level:2},{value:"5.1 redboot",id:"51-redboot",level:2},{value:"5.1.1 COMPILE redboot",id:"511-compile-redboot",level:3},{value:"5.1.2 RUN redboot",id:"512-run-redboot",level:3},{value:"5.2 COMPILE ecos the operating system",id:"52-compile-ecos-the-operating-system",level:2},{value:"5.3 ecos application",id:"53-ecos-application",level:2},{value:"5.3.1 COMPILE ecos application",id:"531-compile-ecos-application",level:3},{value:"5.3.2 RUN ecos application",id:"532-run-ecos-application",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Li Zheng ",(0,t.jsx)(n.a,{href:"mailto:flyskywhy@gmail.com",children:"flyskywhy@gmail.com"})]}),"\n",(0,t.jsx)(n.p,{children:"2013.06.25"}),"\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"0-shell-may-need-to-prepare",children:"0. $SHELL may need to prepare"})}),"\n",(0,t.jsx)(n.p,{children:"If the SHELL used by default in your Linux account is not bash, shell scripts used in this document may run fail. Given bash in the Linux world's versatility, it is recommended unless absolutely necessary, otherwise your account will be set as the default to use bash."}),"\n",(0,t.jsx)(n.p,{children:"Use the following command to view the current SHELL type:"}),"\n",(0,t.jsx)(n.p,{children:"echo $SHELL"}),"\n",(0,t.jsx)(n.p,{children:"Permanently set bash method is to run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"chsh -s /bin/bash YourLinuxUsername"}),"\n",(0,t.jsx)(n.p,{children:"Temporarily set bash method is to run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"/bin/bash"}),"\n",(0,t.jsx)(n.h1,{id:"1-prepared-under-windows",children:"1. Prepared under Windows"}),"\n",(0,t.jsx)(n.h2,{id:"11-git-the-code-management-tool",children:"1.1 Git the code management tool"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.a,{href:"http://code.google.com/p/msysgit/downloads/list",children:"http://code.google.com/p/msysgit/downloads/list"}),", download"]}),"\n",(0,t.jsx)(n.p,{children:"msysGit-fullinstall-LatestVersion.exe"}),"\n",(0,t.jsxs)(n.p,{children:["After installation, determine ",(0,t.jsx)(n.code,{children:"autocrlf = false"})," in the ",(0,t.jsx)(n.code,{children:"msysgit/etc/gitconfig"})," file, or if it is true it will lead to various problems."]}),"\n",(0,t.jsx)(n.h3,{id:"111-msys-terminal-window",children:"1.1.1 msys terminal window"}),"\n",(0,t.jsx)(n.p,{children:"Running msys.bat in the installation directory will open a terminal window with git and mingw compiler environment."}),"\n",(0,t.jsx)(n.h2,{id:"12-cygwin-the-linux-environment-imitation-tool",children:"1.2 Cygwin the Linux environment imitation tool"}),"\n",(0,t.jsx)(n.h3,{id:"121-can-green-install-cygwin-by-git",children:"1.2.1 Can green install cygwin by git"}),"\n",(0,t.jsx)(n.p,{children:"In msys terminal, run the following command:"}),"\n",(0,t.jsxs)(n.p,{children:["cd /c/\ngit clone ",(0,t.jsx)(n.a,{href:"https://github.com/flyskywhy/cygwin.git",children:"https://github.com/flyskywhy/cygwin.git"})]}),"\n",(0,t.jsxs)(n.p,{children:["Then double-click ",(0,t.jsx)(n.code,{children:"C:/cygwin/green_install_1st_double_click.reg"})," in Explorer."]}),"\n",(0,t.jsxs)(n.p,{children:["So that you can run ",(0,t.jsx)(n.code,{children:"C:/Cygwin.bat"})," to enter cygwin terminal window."]}),"\n",(0,t.jsx)(n.p,{children:"Finally, in cygwin terminal, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"cd /cygdrive/c/cygwin/\n./green_install_2nd_run_in_cygwin.sh"}),"\n",(0,t.jsx)(n.p,{children:"Such cygwin is completely installed now."}),"\n",(0,t.jsx)(n.h3,{id:"122-can-install-cygwin-by-setupexe",children:"1.2.2 Can install cygwin by setup.exe"}),"\n",(0,t.jsxs)(n.p,{children:["Download and install ",(0,t.jsx)(n.code,{children:"setup.exe"})," from ",(0,t.jsx)(n.a,{href:"https://www.cygwin.com/",children:"https://www.cygwin.com/"})," , Just switch the state of Devel package from Default to Install in the ",(0,t.jsx)(n.code,{children:"Select Packages"})," page of setup installation interface, then can carried out the installation of cygwin."]}),"\n",(0,t.jsxs)(n.p,{children:["In addition, because cygwin's ",(0,t.jsx)(n.code,{children:"make.exe"})," from ",(0,t.jsx)(n.code,{children:"3.81"})," version of the beginning, make no longer supports Windows path similar to ",(0,t.jsx)(n.code,{children:"C:"}),", so, in order to let the native version (non-cygwin version) compiler and a customized version of the ",(0,t.jsx)(n.a,{href:"https://github.com/flyskywhy/ecos-tools.git",children:"ecos-tools"})," support ecos, after standard cygwin installation, you also need to replace ",(0,t.jsx)(n.code,{children:"cygwin/bin/make.exe"})," with ",(0,t.jsx)(n.code,{children:"3.80 "})," the older version, this version can download from [",(0,t.jsx)(n.a,{href:"http://geant4.cern.ch/support/extras/cygwin/make.exe%5D(",children:"http://geant4.cern.ch/support/extras/cygwin/make.exe]("}),(0,t.jsx)(n.a,{href:"http://geant4.cern.ch",children:"http://geant4.cern.ch"})," / support / extras / cygwin / make.exe)."]}),"\n",(0,t.jsx)(n.h3,{id:"123-cygwin-terminal-window",children:"1.2.3 cygwin terminal window"}),"\n",(0,t.jsx)(n.p,{children:"Running Cygwin.bat in the installation directory will open a terminal window with git and other Linux compiler environment. In a Windows environment, the terminal window without special below collectively refers to the cygwin terminal rather than msys terminal."}),"\n",(0,t.jsx)(n.h1,{id:"2-clone",children:"2. CLONE"}),"\n",(0,t.jsx)(n.h2,{id:"21-download-the-project-code-unified-management-tool",children:"2.1 Download the project code unified management tool"}),"\n",(0,t.jsx)(n.p,{children:"In the terminal window, run the following command:"}),"\n",(0,t.jsxs)(n.p,{children:["mkdir ecos\ncd ecos\ngit clone ",(0,t.jsx)(n.a,{href:"https://github.com/flyskywhy/proj.git",children:"https://github.com/flyskywhy/proj.git"})," -b ecos"]}),"\n",(0,t.jsxs)(n.p,{children:["Note that the ecos here refers to the root directory of the project, rather than the ecos/ecos/ directory checked out by ",(0,t.jsx)(n.code,{children:"proj clone"}),' command follow, to avoid confusion, the follow-up will be "project root directory" to refer to the directory.']}),"\n",(0,t.jsx)(n.h2,{id:"22-environment-settings",children:"2.2 Environment settings"}),"\n",(0,t.jsx)(n.p,{children:"In the project root directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"source proj/env.sh"}),"\n",(0,t.jsxs)(n.p,{children:["Some errors may be reported here, it is because the automatic source script statements in env.sh can not source the script file in the directory that has not been cloned, so the text will descript to run ",(0,t.jsx)(n.code,{children:"source proj/env.sh"})," again."]}),"\n",(0,t.jsx)(n.h2,{id:"23-batch-clone-project-code-by-the-project-code-unified-management-tool",children:"2.3 Batch clone project code by the project code unified management tool"}),"\n",(0,t.jsx)(n.p,{children:"In the project root directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"proj clone"}),"\n",(0,t.jsx)(n.h3,{id:"231-batch-update-project-code-by-the-project-code-unified-management-tool",children:"2.3.1 Batch update project code by the project code unified management tool"}),"\n",(0,t.jsxs)(n.p,{children:["You can enter a directory that contain a .git/ subdirectory, then use ",(0,t.jsx)(n.code,{children:"git fetch"})," to get (local working file will not be changed) or ",(0,t.jsx)(n.code,{children:"git pull"})," to merge (local working file will be changed) the latest version of the central repository to current directory."]}),"\n",(0,t.jsxs)(n.p,{children:["You can also enter the project root directory, and then use ",(0,t.jsx)(n.code,{children:"proj fetch"})," to batch get (local working file will not be changed) or ",(0,t.jsx)(n.code,{children:"proj pull"})," to batch merge (local working file will be changed) the latest version central repository to each subdirectory which contain .git/ subdirectory."]}),"\n",(0,t.jsx)(n.h2,{id:"24-directory-structure-description",children:"2.4 Directory structure description"}),"\n",(0,t.jsx)(n.h3,{id:"241-operating-system-ecos-subproject",children:"2.4.1 Operating system ecos subproject"}),"\n",(0,t.jsx)(n.p,{children:"ecos/ecos/"}),"\n",(0,t.jsx)(n.h3,{id:"242-application-ecos_app_base-subproject",children:"2.4.2 Application ecos_app_base subproject"}),"\n",(0,t.jsx)(n.p,{children:"ecos/apps/ecos_app_base/"}),"\n",(0,t.jsx)(n.p,{children:"Other ecos application projects can reference this subproject."}),"\n",(0,t.jsx)(n.h3,{id:"243-tool-subproject",children:"2.4.3 Tool subproject"}),"\n",(0,t.jsx)(n.p,{children:"ecos/tools/*/"}),"\n",(0,t.jsx)(n.h3,{id:"244-microblaze-hardware-design-subproject",children:"2.4.4 Microblaze hardware design subproject"}),"\n",(0,t.jsx)(n.p,{children:"ecos/mbref/"}),"\n",(0,t.jsx)(n.h1,{id:"3-software-design",children:"3. Software design"}),"\n",(0,t.jsx)(n.h2,{id:"31-compile-ecos-tools",children:"3.1 COMPILE ecos-tools"}),"\n",(0,t.jsxs)(n.p,{children:["By default, aforementioned ",(0,t.jsx)(n.code,{children:"proj clone"})," have downloaded a precompiled directory tools/ecos-tools/ managed by git, if you do not use the precompiled tools but want compile them by yourself, you can press the following steps:"]}),"\n",(0,t.jsx)(n.h3,{id:"311-environment-settings",children:"3.1.1 Environment settings"}),"\n",(0,t.jsx)(n.p,{children:"In the project root directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"source proj/env.sh"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If it is Linux:"}),"\n",(0,t.jsx)(n.p,{children:"sudo apt-get install tcl tcl-dev automake autoconf texinfo tk tk-dev"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If it is Windows:"}),"\n",(0,t.jsx)(n.p,{children:'Selected "Devel" when installing Cygwin, if that version of Cygwin has singled out "Tcl", then you also need to select the "Tcl"'}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"312-compile",children:"3.1.2 Compile"}),"\n",(0,t.jsx)(n.p,{children:"In the project root directory, run the following command (Note: This tool script will automatically delete ecos/tools/ecos-tools/ directory and then automatically reconstruct it, reconstruction of a long time, so here Again, if you feel that the original pre-compiled tools are available, do not execute the following commands):"}),"\n",(0,t.jsx)(n.p,{children:"tool"}),"\n",(0,t.jsx)(n.h2,{id:"32-compile-ecos-the-operating-system",children:"3.2 COMPILE ecos the operating system"}),"\n",(0,t.jsx)(n.h3,{id:"321-environment-settings",children:"3.2.1 Environment settings"}),"\n",(0,t.jsx)(n.p,{children:"In the project root directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"source proj/env.sh"}),"\n",(0,t.jsx)(n.p,{children:"Or in similar ecos/apps/ecos_app_base/ directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"source ../../proj/env.sh"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If it is Linux:"}),"\n",(0,t.jsx)(n.p,{children:"If you are using the precompiled ecos/tools/ecos-tools/, you will need:"}),"\n",(0,t.jsx)(n.p,{children:"sudo apt-get install libstdc++5"}),"\n",(0,t.jsx)(n.p,{children:"The following steps are dependent on the precompiled ecos/tools/ecos-tools/:"}),"\n",(0,t.jsx)(n.p,{children:"cp -a tools/ecos-tools/bin/.eCosPlatforms/ ~/"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"If it is Windows:"}),"\n",(0,t.jsx)(n.p,{children:"The following steps are dependent on the precompiled ecos/tools/ecos-tools/:"}),"\n",(0,t.jsx)(n.p,{children:"Double click ecos/tools/ecos-tools/platforms.reg"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"322-configuration",children:"3.2.2 Configuration"}),"\n",(0,t.jsx)(n.p,{children:"First, if you want to have right-click menu help file in configtool's graphical interface, you will need to let ecos/htdocs/docs-latest/ directory soft link or copy to ecos/ecos/doc/ and then rename to ecos/ecos/doc/html/ directory, so that at the time of follow-up launch configtool, configtool will automatically generate eCos.hhc and eCos.hhp these two files needed by help function in ecos/ecos/ directory."}),"\n",(0,t.jsx)(n.p,{children:"In ecos/apps/ecos_app_base/ kind of application directory run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"configtool ecos_avnet_s6lx9_mmu_tiny_13_1.ecc"}),"\n",(0,t.jsx)(n.p,{children:"Or"}),"\n",(0,t.jsx)(n.p,{children:"configtool ecos_malta.ecc"}),"\n",(0,t.jsx)(n.p,{children:"You can do some fine-tuning on configuring in configtool graphical interface."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["For example does not want to use redboot to download and launch the application, but the use of JTAG directly download and launch the application, you need to uncheck ",(0,t.jsx)(n.code,{children:"eCos HAL->Rom monitor support->Work with a ROM monitor"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Such as not using redboot to download and launch the application, but the use of JTAG download and launch applications directly to the case, still want diag_printf() or printf() can print information, you need to check the ",(0,t.jsx)(n.code,{children:"eCos HAL->Source-level debugging support->Include GDB stubs in HAL"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"3221-the-origin-of-xilinx-fpga-development-board-ecc",children:"3.2.2.1 the origin of Xilinx FPGA development board .ecc"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"Build->Templates->Hardware"}),", set Hardware to"]}),"\n",(0,t.jsx)(n.p,{children:"Avnet S6LX9 MMU tiny 13.1"}),"\n",(0,t.jsx)(n.p,{children:"set Packages to"}),"\n",(0,t.jsx)(n.p,{children:"net"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"Tools->Paths->Build Tools..."}),", set to"]}),"\n",(0,t.jsx)(n.p,{children:"$PROJ_ROOT/tools/microblazeel-unknown-linux-gnu/bin"}),"\n",(0,t.jsxs)(n.p,{children:["Finally, click on ",(0,t.jsx)(n.code,{children:"File->Save As..."})," to save as a configuration file called ecos_avnet_s6lx9_mmu_tiny_13_1.ecc, then two directories called ecos_avnet_s6lx9_mmu_tiny_13_1_build/ and ecos_avnet_s6lx9_mmu_tiny_13_1_install/ will be automatically generated."]}),"\n",(0,t.jsx)(n.h4,{id:"3222-the-origin-of-mips-development-board-ecc",children:"3.2.2.2 the origin of MIPS development board .ecc"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"Build->Templates->Hardware"}),", set Hardware to"]}),"\n",(0,t.jsx)(n.p,{children:"MIPS Malta board with Mips32 4Kc processor"}),"\n",(0,t.jsx)(n.p,{children:"Set Packages to"}),"\n",(0,t.jsx)(n.p,{children:"net"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"Tools->Paths->Build Tools..."}),", set to"]}),"\n",(0,t.jsx)(n.p,{children:"ecos/tools/mipsisa32-elf"}),"\n",(0,t.jsxs)(n.p,{children:["Finally, click on ",(0,t.jsx)(n.code,{children:"File-> Save As ..."})," to save as a configuration file called ecos_malta.ecc, then two directories called ecos_malta_build/ and ecos_malta_install/ will be automatically generated."]}),"\n",(0,t.jsx)(n.h3,{id:"323-compile",children:"3.2.3 Compile"}),"\n",(0,t.jsx)(n.p,{children:"In configtool graphical interface:"}),"\n",(0,t.jsxs)(n.p,{children:["Click on ",(0,t.jsx)(n.code,{children:"Build->Library"})]}),"\n",(0,t.jsx)(n.p,{children:"At this point it will generate corresponding library files in ecos_*_install/lib/"}),"\n",(0,t.jsxs)(n.p,{children:["If compile error, you can try to manually remove ecos_*_build/ and ecos_*_install/ two directories and then\nClick on ",(0,t.jsx)(n.code,{children:"Build->Generate Build Tree"})]}),"\n",(0,t.jsxs)(n.p,{children:["Then click on ",(0,t.jsx)(n.code,{children:"Build->Library"})]}),"\n",(0,t.jsx)(n.h2,{id:"33-compile-ecos-application",children:"3.3 COMPILE ecos application"}),"\n",(0,t.jsx)(n.h3,{id:"331-environment-settings",children:"3.3.1 Environment settings"}),"\n",(0,t.jsx)(n.p,{children:"In the project root directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"source proj/env.sh"}),"\n",(0,t.jsx)(n.p,{children:"Or in similar ecos/apps/ecos_app_base/ directory, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"source ../../proj/env.sh"}),"\n",(0,t.jsx)(n.h3,{id:"332-compile",children:"3.3.2 Compile"}),"\n",(0,t.jsx)(n.p,{children:"In ecos/apps/ecos_app_base/ kind of application directory run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"lunch"}),"\n",(0,t.jsxs)(n.p,{children:["lunch command will lists all .ecc file in current directory, select the  item that same with the aforementioned ecos configuration. If there is no follow-up to close the current terminal window, no need to re-run the command. If you switch .ecc file again by lunch command, ",(0,t.jsx)(n.code,{children:"make clean"})," is needed before first make."]}),"\n",(0,t.jsx)(n.p,{children:"Then run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"make"}),"\n",(0,t.jsx)(n.p,{children:"At this point it will generate an executable file which links ecos library files."}),"\n",(0,t.jsxs)(n.p,{children:["Note: If you are under Windows, and if the compiler is a native version (non-cygwin version), but if the Makefile here defines the variables ",(0,t.jsx)(n.code,{children:"MY_LIBS_TO_GEN"})," and compile error (for example libfreetype source code will compile error in this case), then the solution is to switch back and forth and run make in cygwin and msys terminal window, so it goes to switch a few times to compile successfully."]}),"\n",(0,t.jsxs)(n.p,{children:["The Makefile here uses function from ",(0,t.jsx)(n.a,{href:"https://github.com/flyskywhy/makefile.git",children:"Generic Makefile"}),", so you do not need to modify the Makefile after you add or delete ",(0,t.jsx)(n.code,{children:".c"})," files, unless you want to add one of your own CFLAGS to this application's Makefile instead of to the ",(0,t.jsx)(n.code,{children:"Global build options->Global compiler flags"})," in configtool."]}),"\n",(0,t.jsx)(n.h2,{id:"34-ecos-application-development-in-eclipse",children:"3.4 ecos application development in eclipse"}),"\n",(0,t.jsxs)(n.p,{children:["In Xilinx xsdk like eclipse ",(0,t.jsx)(n.code,{children:"File->Import->General->Existing Projects into Workspace"}),", select ecos/apps/ecos_app_base/ kind of application directory, then you can compile and do other operations in eclipse."]}),"\n",(0,t.jsx)(n.p,{children:"This is because I've done the following operations early in ecos/apps/ecos_app_base/ directory:"}),"\n",(0,t.jsxs)(n.p,{children:["At ",(0,t.jsx)(n.code,{children:"Project name"})," of eclipse ",(0,t.jsx)(n.code,{children:"File->New->Project->C Project"}),", fill ecos_app_base, at ",(0,t.jsx)(n.code,{children:"Makefile project"}),", select ",(0,t.jsx)(n.code,{children:"Empty Project"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"35-run-ecos-application",children:"3.5 RUN ecos application"}),"\n",(0,t.jsx)(n.h3,{id:"351-xilinx-fpga-development-board",children:"3.5.1 Xilinx FPGA development board"}),"\n",(0,t.jsx)(n.h4,{id:"3511-configure-jtag-connection",children:"3.5.1.1 configure JTAG connection"}),"\n",(0,t.jsxs)(n.p,{children:["If you use the USB JTAG from ",(0,t.jsx)(n.a,{href:"https://digilent.com/",children:"https://digilent.com/"})," , In Xilinx xsdk, you need select ",(0,t.jsx)(n.code,{children:"3rd Party Cable, Xilinx Plug-in"})," at ",(0,t.jsx)(n.code,{children:"Type"})," in ",(0,t.jsx)(n.code,{children:"Xilinx Tools->Configure JTAG Settings"})," dialog, then type ",(0,t.jsx)(n.code,{children:"-cable type xilinx_plugin modulename digilent_plugin"})," at ",(0,t.jsx)(n.code,{children:"Other Options"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"3512-download-bit-file-via-jtag",children:"3.5.1.2 download bit file via JTAG"}),"\n",(0,t.jsxs)(n.p,{children:["In Xilinx xsdk, using ",(0,t.jsx)(n.code,{children:"Xilinx Tools->Program FPGA"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"3513-download-and-run-ecos-application-via-jtag-graphical-interface-operation-is-relatively-simple-but-the-download-time-is-longer",children:"3.5.1.3 download and run ecos application via JTAG graphical interface (operation is relatively simple, but the download time is longer)"}),"\n",(0,t.jsxs)(n.p,{children:["In Xilinx xsdk, using ",(0,t.jsx)(n.code,{children:"Xilinx C/C++ ELF"}),'->"Name taken by you" in ',(0,t.jsx)(n.code,{children:"Run->Debug Configurations"})," dialog, if you need to print and do not want to open another putty or other terminal tools, you need select ",(0,t.jsx)(n.code,{children:"Connect STDIO to Console"})," at ",(0,t.jsx)(n.code,{children:"STDIO Connection"})," in the dialog box, then you can see the print information in the Console window of xsdk."]}),"\n",(0,t.jsx)(n.h5,{id:"35131",children:"3.5.1.3.1"}),"\n",(0,t.jsx)(n.p,{children:"When debug in Linux by xsdk as described above, if get the following error:"}),"\n",(0,t.jsx)(n.p,{children:"ERROR: Unexpected error while launching program. Java.lang.RuntimeException: Error creating session\nat com.xilinx.sdk.debug.core.XilinxAppLaunchConfigurationDelegate.debugApplication (Unknown Source)\nat com.xilinx.sdk.debug.core.XilinxAppLaunchConfigurationDelegate.launch (Unknown Source)"}),"\n",(0,t.jsxs)(n.p,{children:["And confirm the following error when run ",(0,t.jsx)(n.code,{children:"mb-gdb"})," in the command line:"]}),"\n",(0,t.jsx)(n.p,{children:"mb-gdb: error while loading shared libraries: libexpat.so.0: cannot open shared object file: No such file or directory"}),"\n",(0,t.jsx)(n.p,{children:"On the following solution:"}),"\n",(0,t.jsx)(n.p,{children:"cd /lib\nsudo ln -s libexpat.so.1 libexpat.so.0"}),"\n",(0,t.jsx)(n.h4,{id:"3514-download-and-run-ecos-application-via-the-jtag-command-line-interface-operation-is-more-complex-but-the-download-time-is-shorter",children:"3.5.1.4 download and run ecos application via the JTAG command line interface (operation is more complex, but the download time is shorter)"}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"XMD Console"})," window of Xilinx xsdk or in a terminal window after run ",(0,t.jsx)(n.code,{children:"xmd"})," command, if you use the USB JTAG from ",(0,t.jsx)(n.a,{href:"https://digilent.com/",children:"https://digilent.com/"})," , you should connect to the JTAG by the following command at first:"]}),"\n",(0,t.jsx)(n.p,{children:"connect mb mdm -cable type xilinx_plugin modulename digilent_plugin"}),"\n",(0,t.jsx)(n.p,{children:"otherwise, just following command:"}),"\n",(0,t.jsx)(n.p,{children:"connect mb mdm"}),"\n",(0,t.jsx)(n.p,{children:"Then using the following command to download ecos application:"}),"\n",(0,t.jsx)(n.p,{children:"dow path/to/ecos_app_elf_file"}),"\n",(0,t.jsxs)(n.p,{children:["Open the ",(0,t.jsx)(n.code,{children:"Terminal 1"})," window of xsdk to see the output print information or enter the command desired by the ecos application."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Finally, run the following command:"}),"\n",(0,t.jsx)(n.p,{children:"run"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the following command to stop in order to run a new dow command:"}),"\n",(0,t.jsx)(n.p,{children:"stop"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Can use the following command to view the help:"}),"\n",(0,t.jsx)(n.p,{children:"help"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"352-running-on-mips-development-board",children:"3.5.2 Running on MIPS development board"}),"\n",(0,t.jsx)(n.p,{children:"Please refer to MIPS development board run, debug elf files."}),"\n",(0,t.jsx)(n.h1,{id:"4-hardware-design",children:"4. Hardware design"}),"\n",(0,t.jsx)(n.h2,{id:"41-xilinx-fpga-development-board",children:"4.1 Xilinx FPGA development board"}),"\n",(0,t.jsx)(n.p,{children:"Hardware developers may iterative develop new projects refer to the following directory:"}),"\n",(0,t.jsx)(n.p,{children:"ecos/mbref/working-designs/Avnet-S6LX9-MMU-tiny-13.1"}),"\n",(0,t.jsx)(n.h1,{id:"5-ecos-application-development-on-i386-virtual-machine",children:"5. ecos application development on i386 virtual machine"}),"\n",(0,t.jsx)(n.p,{children:"Befor port ecos operating system to the development board, application developers can develop applications in i386 virtual machine environment  come from ecos."}),"\n",(0,t.jsx)(n.h2,{id:"51-redboot",children:"5.1 redboot"}),"\n",(0,t.jsx)(n.h3,{id:"511-compile-redboot",children:"5.1.1 COMPILE redboot"}),"\n",(0,t.jsx)(n.p,{children:"In configtool,"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"Hardware"})," as"]}),"\n",(0,t.jsx)(n.p,{children:"i386 PC target (vmWare)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"Packages"})," as"]}),"\n",(0,t.jsx)(n.p,{children:"redboot"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Increase the ",(0,t.jsx)(n.code,{children:"Packages"}),":"]}),"\n",(0,t.jsx)(n.p,{children:"Common ethernet suppport"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"eCos HAL->i386 architecture->i386 PC Target->Startup type"})," as"]}),"\n",(0,t.jsx)(n.p,{children:"FLOPPY"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If you do not want typing the following command every time after start redboot"}),"\n",(0,t.jsx)(n.p,{children:"ip_address -h host_computer's_ip_address"}),"\n",(0,t.jsxs)(n.p,{children:["to make ",(0,t.jsx)(n.code,{children:"load"})," command download elf file from the tftp, you can set ",(0,t.jsx)(n.code,{children:"Redboot ROM monitor->Build Redboot ROM ELF image->RedbootNetworking->Default IP address->Default bootp server"})," ip address of the host computer (note that ip address here separated by comma not dot)."]}),"\n",(0,t.jsxs)(n.p,{children:["Finally ",(0,t.jsx)(n.code,{children:"File->Save As..."})," save as redboot_pc_vmWare.ecc then ",(0,t.jsx)(n.code,{children:"Build->Library"})," can get redboot_pc_vmWare_install/bin/redboot.bin, then use the following command to convert it into an available virtual machine floppy image:"]}),"\n",(0,t.jsx)(n.p,{children:"dd if=/dev/zero of=redboot.img bs=512 count=2880\ndd if=redboot.bin of=redboot.img conv=notrunc"}),"\n",(0,t.jsx)(n.p,{children:"If you are in Windows, such as Cygwin, you can execute the following command:"}),"\n",(0,t.jsx)(n.p,{children:"dd conv=sync if=redboot.bin of=redboot.img (or .flp type) bs=1440k"}),"\n",(0,t.jsx)(n.h3,{id:"512-run-redboot",children:"5.1.2 RUN redboot"}),"\n",(0,t.jsx)(n.p,{children:"In the virtual machine software such as VirtualBox, create a new virtual machine with Other operating system and Other version, create a new floppy disk controller at the media of the virtual machine's configuration, and then register the redboot.img generated above to become VirtualBox virtual floppy in the operation of creating new floppy."}),"\n",(0,t.jsx)(n.p,{children:"Start the virtual machine and you can see the command-line interface of redboot. Enter the help command can get help of redboot."}),"\n",(0,t.jsx)(n.h2,{id:"52-compile-ecos-the-operating-system",children:"5.2 COMPILE ecos the operating system"}),"\n",(0,t.jsxs)(n.p,{children:["In configtool, set ",(0,t.jsx)(n.code,{children:"Hardware"})," to ",(0,t.jsx)(n.code,{children:"i386 PC target (vmWare)"}),", set ",(0,t.jsx)(n.code,{children:"Packages"})," to ",(0,t.jsx)(n.code,{children:"net"}),", save it as ecos_pc_vmWare.ecc and compile."]}),"\n",(0,t.jsx)(n.h2,{id:"53-ecos-application",children:"5.3 ecos application"}),"\n",(0,t.jsx)(n.h3,{id:"531-compile-ecos-application",children:"5.3.1 COMPILE ecos application"}),"\n",(0,t.jsxs)(n.p,{children:["Same with the aforementioned ",(0,t.jsx)(n.code,{children:"3.3 COMPILE ecos application"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"532-run-ecos-application",children:"5.3.2 RUN ecos application"}),"\n",(0,t.jsx)(n.p,{children:"In redboot, download elf file:"}),"\n",(0,t.jsx)(n.p,{children:"load elf_file"}),"\n",(0,t.jsx)(n.p,{children:"In redboot, run elf file:"}),"\n",(0,t.jsx)(n.p,{children:"go"}),"\n",(0,t.jsx)(n.h1,{id:"appendix-code-management-process-to-prepare-for-subsequent-updates",children:"Appendix: Code management process to prepare for subsequent updates"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the following command to download tool which can convert hg repository into git repository:"}),"\n",(0,t.jsxs)(n.p,{children:["git clone ",(0,t.jsx)(n.a,{href:"https://github.com/offbytwo/git-hg.git",children:"https://github.com/offbytwo/git-hg.git"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the following command to download the ecos code:"}),"\n",(0,t.jsxs)(n.p,{children:["~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/ecos",children:"http://hg-pub.ecoscentric.com/ecos"}),"\n~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/ecos-v2_0-branch",children:"http://hg-pub.ecoscentric.com/ecos-v2_0-branch"}),"\n~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/ecos-v3_0-branch",children:"http://hg-pub.ecoscentric.com/ecos-v3_0-branch"}),"\n~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/flash_v2",children:"http://hg-pub.ecoscentric.com/flash_v2"}),"\n~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/images",children:"http://hg-pub.ecoscentric.com/images"}),"\n~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/nand-ecoscentric",children:"http://hg-pub.ecoscentric.com/nand-ecoscentric"}),"\n~/proj/git-hg/bin/git-hg clone ",(0,t.jsx)(n.a,{href:"http://hg-pub.ecoscentric.com/yaffs-ecoscentric-gpl",children:"http://hg-pub.ecoscentric.com/yaffs-ecoscentric-gpl"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the following command to download the code needed in the compiling of the ecos-tools:"}),"\n",(0,t.jsxs)(n.p,{children:["git clone ",(0,t.jsx)(n.a,{href:"https://github.com/wxWidgets/wxWidgets.git",children:"https://github.com/wxWidgets/wxWidgets.git"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the following command to download the tool which can convert cvs repository into git repository:"}),"\n",(0,t.jsx)(n.p,{children:"sudo apt-get install git-cvs"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the following command to download the ecos code, and finally found the code in the hg repository is more appropriate, so the following code is obsolete:"}),"\n",(0,t.jsxs)(n.p,{children:["git cvsimport -v -d :pserver",":anoncvs","@ecos.sourceware.org:/cvs/ecos ecos\ngit cvsimport -v -d :pserver",":anoncvs","@ecos.sourceware.org:/cvs/ecos ecos/host\ngit cvsimport -v -d :pserver",":anoncvs","@ecos.sourceware.org:/cvs/ecos ecos-opt\ngit cvsimport -v -d :pserver",":anoncvs","@ecos.sourceware.org:/cvs/ecos htdocs"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Using the following command in ecos directory to convert the ",(0,t.jsx)(n.code,{children:"3.0 release"})," version of some reference code into the ",(0,t.jsx)(n.code,{children:"current"})," version, so that they can be cleanly put into the git repository to do the comparison:"]}),"\n",(0,t.jsx)(n.p,{children:'find . -name v3_0 -type d | xargs rename "s/v3_0/current/"\nfind . -name *.ecm | xargs sed -i "s/v3_0/current/g"'}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Using the following command in ecos directory to convert the ",(0,t.jsx)(n.code,{children:"2.0 release"})," version of some reference code into the ",(0,t.jsx)(n.code,{children:"current"})," version, so that they can be cleanly put into the git repository to do the comparison:"]}),"\n",(0,t.jsx)(n.p,{children:'find . -name v2_0 -type d | xargs rename "s/v2_0/current/"\nfind packages/templates -name v2_0.ect -type f | xargs rename "s/v2_0/current/"\nfind packages/templates -name *.ect | xargs sed -i "s/v2_0/current/g"\nfind packages -name *.ecm | xargs sed -i "s/v2_0/current/g"'}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Using the following command in ecos directory to remove the file permissions of the reference code, so that they can be cleanly put into the git repository to do the comparison:"}),"\n",(0,t.jsx)(n.p,{children:"git diff --summary | grep --color 'mode change 100755 => 100644' | cut -d' ' -f7- | xargs -d'\\n' chmod +x\ngit diff --summary | grep --color 'mode change 100644 => 100755' | cut -d' ' -f7- | xargs -d'\\n' chmod -x"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Use the following command to rename .cvsignore to .gitignore:"}),"\n",(0,t.jsx)(n.p,{children:'find . -name ".cvsignore" | xargs rename "s/cvs/git/"'}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>s});var i=o(6540);const t={},c=i.createContext(t);function l(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);