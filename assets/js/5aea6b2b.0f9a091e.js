"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8775],{6093:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript/emsdk\u4f7f\u7528\u8be6\u89e3","title":"emsdk\u4f7f\u7528\u8be6\u89e3","description":"Li Zheng flyskywhy@gmail.com","source":"@site/../g/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript/emsdk\u4f7f\u7528\u8be6\u89e3.md","sourceDirName":"i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript","slug":"/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript/emsdk\u4f7f\u7528\u8be6\u89e3","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript/emsdk\u4f7f\u7528\u8be6\u89e3","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"React\u4f7f\u7528\u8be6\u89e3","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript/React\u4f7f\u7528\u8be6\u89e3"},"next":{"title":"js\u6bd4ts\u66f4\u597d\u7528","permalink":"/g/docs/i\u4e3b\u89c2\u7684\u4f53\u9a8c\u65b9\u5f0f/t\u5feb\u4e50\u7684\u4f53\u9a8c/\u7535\u4fe1/Tool/\u7f16\u7a0b\u8bed\u8a00/JavaScript/js\u6bd4ts\u66f4\u597d\u7528"}}');var i=n(4848),c=n(8453);const r={},l="emsdk \u4f7f\u7528\u8be6\u89e3",o={},d=[];function a(e){const s={a:"a",br:"br",code:"code",h1:"h1",header:"header",li:"li",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:["Li Zheng ",(0,i.jsx)(s.a,{href:"mailto:flyskywhy@gmail.com",children:"flyskywhy@gmail.com"})]}),"\n",(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"emsdk-\u4f7f\u7528\u8be6\u89e3",children:"emsdk \u4f7f\u7528\u8be6\u89e3"})}),"\n",(0,i.jsx)(s.p,{children:"emsdk \u53ef\u4ee5\u5c06 C \u4ee3\u7801\u7f16\u8bd1\u4e3a\u53ef\u4ee5\u88ab JS \u8c03\u7528\u7684 WebAssembly \u683c\u5f0f\u3002"}),"\n",(0,i.jsx)(s.h1,{id:"\u5b89\u88c5-emsdk",children:"\u5b89\u88c5 emsdk"}),"\n",(0,i.jsxs)(s.p,{children:["cd ~/tools/\ngit clone ",(0,i.jsx)(s.a,{href:"https://github.com/emscripten-core/emsdk.git",children:"https://github.com/emscripten-core/emsdk.git"}),"\ncd emsdk\n./emsdk install latest\n./emsdk activate latest"]}),"\n",(0,i.jsxs)(s.h1,{id:"\u4f7f\u7528-emsdk-\u7f16\u8bd1\u51fa-js-\u548c-wasm",children:["\u4f7f\u7528 emsdk \u7f16\u8bd1\u51fa ",(0,i.jsx)(s.code,{children:".js"})," \u548c ",(0,i.jsx)(s.code,{children:".wasm"})]}),"\n",(0,i.jsx)(s.p,{children:"source ~/tools/emsdk_env.sh"}),"\n",(0,i.jsx)(s.p,{children:"\u624b\u52a8\u4fee\u6539\u6bd4\u5982 C++ \u9879\u76ee\u4e2d\u7684 Makefile \uff0c\u4f7f\u8fbe\u5230\u8fd9\u6837\u7684\u610f\u56fe"}),"\n",(0,i.jsx)(s.p,{children:"CC=emcc AR=emar"}),"\n",(0,i.jsxs)(s.p,{children:["\u5982\u679c Makefile \u672c\u6765\u53ef\u4ee5\u7f16\u8bd1\u51fa ",(0,i.jsx)(s.code,{children:".so"})," \u6216 ",(0,i.jsx)(s.code,{children:".a"})," \u6587\u4ef6\u7684\uff0c\u5219\u5728 Makefile \u4e2d\u518d\u591a\u52a0\u5982\u4e0b\u8bed\u53e5\u5c31\u53ef\u4ee5\u5f97\u5230\u6240\u9700\u7684 ",(0,i.jsx)(s.code,{children:".js"})," \u6587\u4ef6"]}),"\n",(0,i.jsxs)(s.p,{children:["emcc -O2 some.a -o some.js ",(0,i.jsx)(s.br,{}),"\n","-s TOTAL_MEMORY=314572800 ",(0,i.jsx)(s.br,{}),"\n","-s MODULARIZE=1 -s EXPORT_NAME=SomeCUtils ",(0,i.jsx)(s.br,{}),"\n","-s EXPORTED_FUNCTIONS='[\"_someCFunc\"]' ",(0,i.jsx)(s.br,{}),"\n","-s EXTRA_EXPORTED_RUNTIME_METHODS='[\"ccall\"]'"]}),"\n",(0,i.jsx)(s.p,{children:"\u6700\u540e\u8fdb\u5165 C++ \u9879\u76ee\u76ee\u5f55\u8fd0\u884c\u5982\u4e0b\u8bed\u53e5"}),"\n",(0,i.jsx)(s.p,{children:"emmake make"}),"\n",(0,i.jsx)(s.p,{children:"\u5373\u53ef\u3002"}),"\n",(0,i.jsxs)(s.p,{children:["\u5982\u679c C++ \u9879\u76ee\u539f\u6765\u662f\u7528 configure \u6216 CMAKE \u81ea\u52a8\u751f\u6210 Makefile \u7684\uff0c\u5219\u53c2\u8003 ",(0,i.jsx)(s.a,{href:"https://emscripten.org/docs/compiling/Building-Projects.html",children:"Building Projects \u2014 Emscripten documentation"})," \u8fdb\u884c\u76f8\u5e94\u64cd\u4f5c\u5373\u53ef\u3002"]}),"\n",(0,i.jsxs)(s.h1,{id:"\u5728-js-\u4e2d\u8c03\u7528-js-\u6587\u4ef6",children:["\u5728 JS \u4e2d\u8c03\u7528 ",(0,i.jsx)(s.code,{children:".js"})," \u6587\u4ef6"]}),"\n",(0,i.jsx)(s.p,{children:"\u53ef\u81ea\u884c\u53c2\u8003"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://emscripten.org/docs/getting_started/FAQ.html",children:"FAQ \u2014 Emscripten documentation"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://zhuanlan.zhihu.com/p/101686085",children:"\u6d4f\u89c8\u5668\u4e2d\u6267\u884c C \u8bed\u8a00\uff1fWebAssembly \u5b9e\u8df5"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html",children:"asm.js \u548c Emscripten \u5165\u95e8\u6559\u7a0b - \u962e\u4e00\u5cf0\u7684\u7f51\u7edc\u65e5\u5fd7"})}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var t=n(6540);const i={},c=t.createContext(i);function r(e){const s=t.useContext(c);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(c.Provider,{value:s},e.children)}}}]);