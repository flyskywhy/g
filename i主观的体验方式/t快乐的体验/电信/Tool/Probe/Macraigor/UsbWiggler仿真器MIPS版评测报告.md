Li Zheng flyskywhy@gmail.com

# UsbWiggler 仿真器 MIPS 版评测报告

2012.2.12


1. 基本结论

    官方自带调试软件界面中显示可支持 4k 、 14k 、 24k ，实际使用下来发现可正常单步调试 4k 的程序，无法调试 34k 的程序。

2. 过往评测勘误

    5 、 6 年前同事得出的只支持大端的结论不正确。自带调试软件启动时默认是大端的，但只要输入一个 `endian little` 命令就会变成支持小端模式。这点得到了我自己的调试结果以及持有另外一个 UsbWiggler 的前同事邮件回复的确认。

3. 现有调试能力

    安装例如 `mcgr-hwsupport_9.5-1_i386.deb` 之后，在命令行中运行 `OcdCommander` 即可开始调试。

    官方软件支持 eclipse 且带有 eclipse 的调试例子工程源代码。

    官方软件 2010 年下载的 `6.0` 版最大支持到 4k ， 2012 年下载的 `9.5` 版最大支持到 24k ，从这些信息可以推断出 UsbWiggler 支持更多型号 mips 芯片的方法主要是靠软件实现，现在支持 24k 是没有问题的，只是我们目前没有 24k 来验证。连接上 4k 再运行调试软件的 halt 命令暂停 cpu 后，就可查看寄存器或是下载 elf 程序并单步运行等等。连接上 34k 后，一运行 halt ，调试软件立即就会崩溃，且不论是 32位、 64 位的 Linux 还是 WinXP 皆如此，推测是因为 fs2 仿真器调试软件是在先运行 device vpe0 命令后才能进行 halt 等命令，而 UsbWiggler 调试软件现有版本中还未有类似 device vpe0 之类的命令来选择 34k 中的某个 vpe 进行下一步操作。

4. 未来功能预测

    官方后续某个版本应会增加对 34k 的支持，只是不知何时会推出新版本，按之前的更新历史可推测为 2 年内。
